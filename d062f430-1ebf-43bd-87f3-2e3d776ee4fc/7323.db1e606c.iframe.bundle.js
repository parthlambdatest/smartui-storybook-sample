"use strict";(globalThis.webpackChunkfirecracker=globalThis.webpackChunkfirecracker||[]).push([[7323],{"./components/AmpLiveListWrapper.js":(W,R,r)=>{r.r(R),r.d(R,{default:()=>L});var a=r("./node_modules/next/dist/compiled/react/index.js"),x=r("./node_modules/prop-types/index.js"),D=r.n(x),h=r("./node_modules/next/amp.js"),Y=r.n(h),A=a.createElement;const N=({children:w,id:V,dataMaxItemsPerPage:P})=>(0,h.useAmp)()?A("amp-live-list",{class:"amp-live-list-wrapper","data-poll-interval":"15000","data-max-items-per-page":P,id:V},A("div",{className:"dn",update:"true"},"new updates"),w):w;N.propTypes={children:D().node},N.defaultProps={children:null};const L=N},"./components/providers/StatewideElectionProvider.js":(W,R,r)=>{r.r(R),r.d(R,{StatewideElectionConsumer:()=>Oe,StatewideElectionContext:()=>Q,StatewideElectionProvider:()=>te});var a=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),x=r("./node_modules/d3-collection/src/index.js"),D=r("./node_modules/lodash.orderby/index.js"),h=r.n(D),Y=r("./node_modules/lodash.uniq/index.js"),A=r.n(Y),N=r("./node_modules/next/dist/compiled/react/index.js"),L=r("./helpers/getElectionTypes.js"),w=r("./helpers/getHeadshotUrl.js"),V=r("./helpers/getPartyColor.js");const G=({candidates:t,electionDate:n,electionType:e,electionTypeCode:s,delegates:i,officeCode:E})=>{const l={},f=t.map(v=>{const{call_status:b,candidate_code:j,candidate_name:d,column:u,family_name:O,given_name:I,is_editorial:_,is_incumbent:B,major_party:y,order:c,percent:m,vote:C}=v;let p,o=c;if(e==="primary"&&E==="P"&&i){p=i.find(F=>F.candidate_code===j);const{order:g=null}=p||{};o=g||null}E==="H"&&(l[y]?l[y]+=1:l[y]=1,o=l[y]);const U=(0,V.default)({party:y,order:o,officeCode:E,electionTypeCode:s}),T=(0,w.default)({party:y,firstName:I,lastName:O,officeCode:E,electionDate:n});return{id:j,candidate:d,color:U,column:u,delegates:p,headshotUrl:T,isEditorial:_,isIncumbent:B,isWinner:["A","P","W"].includes(b),firstName:I,lastName:O,order:o,party:y,percent:m,votes:C}});return h()(f,["votes","isIncumbent","isEditorial","lastName"],["desc","desc","desc","asc"])};var X=r("./node_modules/lodash.kebabcase/index.js"),K=r.n(X),H=r("./helpers/typeChecker.js");const re=({candidate:t,county:n})=>{if(n&&n.candidates&&t){const{vote:e,vote_percent_1:s}=n.candidates.find(i=>i.code===t.id)||{};return{percent:(0,H.isNumber)(s)?s:"",votes:(0,H.isNumber)(e)?e:""}}if(t&&t.column&&n){const e=`${t.column.toLowerCase()}_vote_percent_1`,s=`${t.column.toLowerCase()}_vote`;return{percent:(0,H.isNumber)(n[e])?n[e]:"",votes:(0,H.isNumber)(n[s])?n[s]:""}}return{percent:"",votes:""}};var ce=r("./helpers/isTownship.js");const ie=t=>t.includes("Legislative District")?!0:null,ae=t=>t.includes("Congressional District")?!0:null,le=t=>t&&t.includes("Ward")?!0:null;function Z(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,s)}return e}function z(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?Z(Object(e),!0).forEach(function(s){(0,a.default)(t,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Z(Object(e)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))})}return t}const de=({counties:t,raceResults:n})=>{const e=t.find(E=>E.county_name==="Chicago"),s=t.find(E=>E.county_name==="Cook Suburbs");let i;if(e&&s){i=t.filter(d=>d.county_name!=="Chicago"),i=i.filter(d=>d.county_name!=="Cook Suburbs");const{candidates:E,total_vote:l}=e,{candidates:f,total_vote:S}=s,v=l+S,b=E.map((d,u)=>{let O;return v===0?O=0:O=((f[u].vote+d.vote)/v*100).toFixed(2),z(z({},d),{},{vote_percent_1:Number(O)})}),j=z(z({},e),{},{county_name:"Cook",candidates:b,fips_code:"17031"});i.push(j),i=i.sort((d,u)=>d.fips_code-u.fips_code)}return(i||t).map(E=>{const{county_name:l="",county_code:f,fips_code:S,n_precinct:v,n_precinct_report:b,n_precinct_report_percent_1:j,registered:d,total_vote:u,updated_at:O,updated:I}=E,_=S.slice(0,2),B=(0,ce.default)({fips:_}),y=_==="44",c=ie(l),m=ae(l),C=le(l);let p=S;(B||m)&&(p=K()(l)),c&&(p=K()(f)),C&&(p=K()(f)),y&&(p=K()(l));const o=n.map(T=>{const g=re({candidate:T,county:E});return z(z({},T),g)}),U=h()(o.filter(T=>T.isEditorial),["votes","isIncumbent","lastName"],["desc","desc","asc"]);return{county_name:l,featureId:p,fips_code:S,n_precinct:v,n_precinct_report:b,n_precinct_report_percent_1:j,registered:d,results:U,total_vote:u,updated_at:O,updated:I}})};function k(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,s)}return e}function q(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?k(Object(e),!0).forEach(function(s){(0,a.default)(t,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):k(Object(e)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))})}return t}const ue={P:"Presidential exit polls",PV:"Presidential entrance polls"},pe={P:"Exit Polls",PV:"Entrance Polls"},Ee={Dem:"Democratic",Rep:"Republican"},fe=["H711","H2602","H16"],Ce=(t,[n=""])=>t.map(e=>e==="P"&&n==="2020-03-17"?"Presidential primary polls":ue[e]),ye=({exit_polls:t,allCandidates:n})=>{if(!t||!t.length)return[];const e=A()(t.map(f=>f.office_code)),s=A()(t.map(f=>f.election_date)),i=Ce(e,s),E=t.map(f=>{const{election_type:S,columns:v,row_entry:b,office_code:j}=f,d=v?v.slice(5):[],u=(0,L.getPartyByElectionType)(S),O=d.map(c=>{const{order:m}=n.find(p=>p.id===c.candidate_code);return`bg-${(0,V.default)({party:u,order:m,electionTypeCode:S,officeCode:j}).replace("#","")}`}),I=Object.keys(b).reduce((c,m)=>{const C=b[m],[p]=C;return c[p]||(c[p]=[]),c[p].push(C),c},{}),_=Object.keys(I).filter(c=>!fe.includes(c)).map(c=>I[c]),B=Ee[u],y=pe[j];return q(q({},f),{},{allCandidates:n,buttonText:B,colors:O,displayColumns:d,party:u,questionBlocks:_,type:y})}),l=h()(E,["party"],["asc"]);return{titles:i,sorted:l}};var M=r("./helpers/constants.js"),me=N.createElement;function ee(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,s)}return e}function $(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ee(Object(e),!0).forEach(function(s){(0,a.default)(t,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ee(Object(e)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))})}return t}const Pe=(t,n,e)=>{if(!n.length)return[];const s=n[0].state_code,i={KY:"2019-11-05",CA:["2020-03-03","2020-05-12"],NY:"2020-06-23",NC:"2019-09-10",IA:"2020-02-03"};if(!t||(()=>i[s]?Array.isArray(i[s])?i[s].includes(e):i[s]&&i[s]===e:!1)()||M.RACES_TO_GET_BY_DATE_EXCEPTIONS[e])return n;const l={special:M.SPECIAL_ELECTION_TYPE_CODES,primary:M.PRIMARY_ELECTION_TYPE_CODES};return l[t]&&n.filter(f=>l[t].includes(f.election_type))||n},Q=N.createContext({});class te extends N.Component{constructor(n){super(n);const{value:{NEATdata:e,electionType:s,topojson:i,usState:E}}=n,{races:l=[],exit_polls:f=[],DayID:S=null}=e,v=[M.OFFICE_CODES.ISSUE_1,M.OFFICE_CODES.ISSUE_2,M.OFFICE_CODES.ISSUE_3],b=l.filter(o=>!v.includes(o.office_code)),j=M.OFFICE_CODES.PRESIDENT,d=M.ELECTION_TYPE_CODES.DEMOCRATIC_CAUCUS,u=M.ELECTION_TYPE_CODES.DEMOCRATIC_PRIMARY,O=M.OFFICE_CODES.PRES_PRE_VIABILITY,I=M.OFFICE_CODES.PRESIDENT_SPECIAL,_=l.find(o=>o.election_type===u||o.election_type===d),B=!!_;if(_){const{delegate_data:o}=_;l.filter(T=>T.office_code===O||T.office_code===I).forEach(T=>{T.delegate_data=o})}const y=(0,L.getIsCaucusFromRaces)(b),c=b.map(o=>{let U=[];const{counties:T,candidates:g,delegate_data:F,election_date:J,office_code:se,election_type:_e,race_id:Te}=o,ne=F;se===j&&ne&&(U=F.state_level_candidates),B&&ne&&(U=F.state_level_candidates);const oe=G({candidates:g,delegates:U,electionDate:J,electionType:s,electionTypeCode:_e,officeCode:se}),ge=de({counties:T,raceResults:oe});return $($($({},o),{raceId:`nbc-${Te.replace(/~/g,"--")}`}),{},{results:oe,counties:ge})}),m=c.filter(o=>!["PV","P2"].includes(o.office_code)),C=Array.prototype.concat.apply([],[...m.map(o=>o.results)]),p=ye({exit_polls:f,allCandidates:C});this.state={exitPolls:p,electionType:s,races:c,topojson:i,usState:E,isCaucus:y,dayId:S}}render(){const{children:n}=this.props,{races:e,exitPolls:s,isCaucus:i,electionType:E,dayId:l}=this.state,f=d=>e.find(u=>u.raceId===d),S=()=>{const d=Pe(E,e,l),u=x.nest().key(c=>c.office_code[0]).entries(d).map(({key:c,values:m})=>{let C;if(c==="P"){const p=m.find(g=>{const F=g.office_code==="P",J=g.election_type==="E"||g.election_type==="D";return F&&J}),o=m.find(g=>g.election_type==="S"||g.election_type==="R"),U=m.find(g=>g.office_code==="PV"),T=m.find(g=>g.office_code==="P2");C=[],p&&C.push(p),U&&C.push(U),T&&C.push(T),o&&C.push(o)}else C=h()(m,["jcode","election_type","race_name"],["asc","asc","desc"]);return{key:c,values:C}}),O=u.find(({key:c})=>c==="P"),I=u.find(({key:c})=>c==="S"),_=u.find(({key:c})=>c==="H"),B=u.find(({key:c})=>c==="G"),y=u.find(({key:c})=>c==="I");return[O,I,_,B,y].filter(c=>c)},v=()=>!s||!s.sorted||!s.sorted.length?null:s.sorted,b=()=>!s||!s.titles||!s.titles.length?null:s.titles,j=()=>{if(!e&&e.length)return null;const d=e.filter(o=>o.office_code==="P"),u=e.filter(o=>o.office_code==="S"),O=e.filter(o=>o.office_code==="H"),I=e.filter(o=>o.office_code==="G"),_=[...d,...u,...O,...I].filter(o=>o),B=_[0]||{},y=A()(_.map(o=>o.results[0].party)),c=A()(_.map(o=>o.office_code)),{election_type:m,office_code:C,election_date:p}=B;return{electionTypeCode:m,officeCode:C,parties:y,electionDate:p,uniqueOfficeCodes:c}};return me(Q.Provider,{value:{state:this.state,getRaceById:f,getRacesGroupedByOffice:S,getStatewideMetaData:j,getExitPolls:v,getExitPollTitles:b,isCaucus:i}},n)}}te.displayName="StatewideElectionProvider";const Oe=Q.Consumer},"./helpers/getElectionTypes.js":(W,R,r)=>{r.r(R),r.d(R,{default:()=>V,electionTypeMap:()=>x,electionTypeNames:()=>h,electionTypeParties:()=>D,getIsCaucusFromRaces:()=>w,getNameByElectionType:()=>N,getPartyByElectionType:()=>A,isCaucusByElectionType:()=>L});var a=r("./helpers/constants.js");const x={G:"General election",D:"Democratic primary",R:"Republican primary",E:"Democratic caucus",S:"Republican caucus"},D={[a.ELECTION_TYPE_CODES.GENERAL_ELECTION]:null,[a.ELECTION_TYPE_CODES.DEMOCRATIC_PRIMARY]:"Dem",[a.ELECTION_TYPE_CODES.DEMOCRATIC_CAUCUS]:"Dem",[a.ELECTION_TYPE_CODES.DEMOCRATIC_RUNOFF]:"Dem",[a.ELECTION_TYPE_CODES.DEMOCRATIC_SPECIAL_PRIMARY]:"Dem",[a.ELECTION_TYPE_CODES.DEMOCRATIC_SPECIAL_PRIMARY_RUNOFF]:"Dem",[a.ELECTION_TYPE_CODES.DEMOCRATIC_STATE_CONVENTION]:"Dem",[a.ELECTION_TYPE_CODES.DEMOCRATIC_FIREHOUSE_PRIMARY]:"Dem",[a.ELECTION_TYPE_CODES.REPUBLICAN_PRIMARY]:"Rep",[a.ELECTION_TYPE_CODES.REPUBLICAN_CAUCUS]:"Rep",[a.ELECTION_TYPE_CODES.REPUBLICAN_RUNOFF]:"Rep",[a.ELECTION_TYPE_CODES.REPUBLICAN_SPECIAL_PRIMARY]:"Rep",[a.ELECTION_TYPE_CODES.REPUBLICAN_SPECIAL_PRIMARY_RUNOFF]:"Rep",[a.ELECTION_TYPE_CODES.REPUBLICAN_STATE_CONVENTION]:"Rep",[a.ELECTION_TYPE_CODES.REPUBLICAN_FIREHOUSE_PRIMARY]:"Rep"},h={G:null,D:"primary",R:"primary",E:"caucus",S:"caucus"},Y=P=>typeof P!="string"?"":x[P],A=P=>typeof P!="string"?null:D[P],N=P=>typeof P!="string"?null:h[P],L=P=>["E","S"].includes(P),w=P=>Array.isArray(P)?P.find(X=>L(X.election_type)):!1,V=Y},"./helpers/isTownship.js":(W,R,r)=>{r.r(R),r.d(R,{default:()=>D});var a=r("./data/usStates.js");const D=({fips:h,stateName:Y,abbr:A})=>{if(typeof Y!="string"&&!h&&!A)return!1;const N=a.default.find(L=>L.name===Y||L.fips===h||L.abbr===A);return N&&!!N.isTownship}},"./helpers/typeChecker.js":(W,R,r)=>{r.r(R),r.d(R,{isEmptyObject:()=>x,isNumber:()=>a});const a=D=>typeof D=="number",x=D=>typeof D=="object"&&!Array.isArray(D)&&Object.keys(D).length===0}}]);
