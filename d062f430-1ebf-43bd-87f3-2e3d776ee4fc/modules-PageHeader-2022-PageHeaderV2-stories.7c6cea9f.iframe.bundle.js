"use strict";(globalThis.webpackChunkfirecracker=globalThis.webpackChunkfirecracker||[]).push([[8739],{"./components/modules/PageHeader/2022/PageHeaderV2.stories.js":(J,r,e)=>{e.r(r),e.d(r,{AllOptions:()=>ze,__namedExportsOrder:()=>Et,default:()=>ut});var _=e("./node_modules/@babel/runtime/helpers/esm/extends.js"),i=e("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),d=e("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),O=e("./node_modules/next/dist/compiled/react/index.js"),D=e("./node_modules/dayjs/plugin/timezone.js"),X=e.n(D),y=e("./components/modules/PageHeader/2022/PageHeaderV2.js"),S=e("./server/v2/helpers/getPollsCloseFormatted.js"),R=e("./components/PageAnchor/PageAnchorContext.js"),l=e("./helpers/constants.js"),B=e("./lib/dayjsCustom.js"),j=e("./helpers/stateNameUtilities.js"),P=e("./node_modules/lodash.orderby/index.js"),W=e.n(P),C=e("./node_modules/lodash.get/index.js"),s=e.n(C),T=e("./node_modules/lodash.isempty/index.js"),v=e.n(T),x=e("./node_modules/dayjs/dayjs.min.js"),z=e.n(x);const q=(t={},a)=>{const{electoral_votes:n}=t;return!n||n===0?{}:{number:n,showPopularVoteLabel:["ME","NE"].includes(a)}};var u=e("./helpers/getHeadshotUrl.js"),f=e("./helpers/determineOfficeType.js"),E=e("./helpers/getCallStatus.js"),h=e("./helpers/getIsWinner.js"),Q=e("./helpers/timeUtilities.js"),te=e("./helpers/getNeatVoteModes.js"),ae=e("./server/v2/format/formatParty.js"),ce=e("./helpers/getPartyColor.js"),ue=e("./server/v2/helpers/isNonPartisanRace.js"),_e=e("./server/v2/format/formatCandidate.js"),ve=e("./server/v2/helpers/dates.js"),k=e("./components/modules/ResultsSummary/utils.js");const me=["gain","runoffTotal","uncalledTotal"];function Te(t,a){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);a&&(o=o.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,o)}return n}function se(t){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?Te(Object(n),!0).forEach(function(o){(0,d.default)(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}const{PRESIDENT:Me,SENATE:Ce,SENATE_SPECIAL:ye,GOVERNOR:ge,HOUSE:fe,ATTORNEY_GENERAL:he,LT_GOVERNOR:je,SECRETARY_OF_STATE:Se,MAYOR:Ne,STATE_SENATE:c,SUPREME_COURT:p}=l.OFFICE_CODES,I=[Me,Ce,ye,ge,fe,he,je,Se,Ne,c,p],$=[Me,Ce,ye,fe,ge,Se,he,je,Ne,c,p],F=(t="")=>["O","M"].includes(t),G=(t,a)=>{const n=a>=2022?{dem:"bg-009AF4",rep:"bg-D42F37",gop:"bg-D42F37",lib:"bg-5C5C5C",ind:"bg-5C5C5C",other:"bg-5C5C5C"}:{dem:"bg-0471E6",rep:"bg-DE3535",gop:"bg-DE3535",lib:"bg-595959",ind:"bg-595959",other:"bg-595959"};return n[t]||n.other},Ee=(t,a,n=!1)=>({maxValue:100,caret:{percent:t},showLegend:n,values:a}),De=(t={},a,n,o,m,g="2020",L=!1)=>{const V=s()(t,"candidate_name",""),U=s()(t,"candidate_code",""),Y=s()(t,"vote",""),b=s()(t,"major_party",""),A=s()(t,"percent",0),H=s()(t,"given_name",""),K=s()(t,"family_name",""),re=s()(t,"call_status",""),ne=o&&s()(t,"is_incumbent",!1),M=(0,ae.default)(b),N=(0,ue.default)({officeCode:a,stateAbbr:m}),Z=N?(0,ce.default)({party:N?b:M,electionSeason:g,officeCode:a,order:t.order,stateAbbr:m,electionTypeCode:n,useFullColorPalette:N}).replace("#","bg-"):G(M,g),le=`${A}%`,oe=(0,u.default)({party:b,firstName:H,lastName:K,officeCode:a,stateCode:m,electionDate:g,fileFormat:L?"png":"jpg"}),de=(0,h.default)(re);return{callStatus:re,code:U,name:V,firstName:H,lastName:K,headshotUrl:oe,isWinner:de,votes:Y,party:M,bgColor:Z,percentVote:A,formattedPercentVote:le,isIncumbent:ne}};function xe({officeCode:t,stateNameSlug:a,electionSeason:n}){return(t===Ce||t===ye)&&a==="georgia"&&n==="2020"}const Le=({officeCode:t,stateName:a,stateNameSlug:n,isRunoff:o=!1,electionSeason:m,electionTypeCode:g})=>{const L=(0,f.default)(t),V=(0,f.normalizeOfficeName)(L);let U;if(o&&xe({officeCode:t,stateNameSlug:n,electionSeason:m})){const A=t===ye?2:1;U=`${(0,f.default)(t,!1)} Seat ${A} Runoff`}else o?U=`${(0,f.default)(t,!1)} Runoff`:U=a?`${a} ${L} Results`:L;const Y="Race Details",b=(0,f.getStateOfficeLink)({officeCode:t,stateNameSlug:n,isRunoff:o,electionSeason:m,electionTypeCode:g});return{officeCode:t,office:V,headlineText:U,linkText:Y,href:b}},Ue=t=>{const a={value:0,displayString:null};let n=null;return t<=0?n=null:t<500?n="Less than 500":n=t.toLocaleString(),a.value=t,a.displayString=n,a},Ze=t=>{const a=new Map;return te.default.forEach(n=>{const{neatFlagKey:o,neatValueKey:m,neatPercentKey:g,neatCandidateValueKey:L,modeKey:V,label:U,color:Y}=n,b=`${L}_percent_0`,A=s()(t,o,!1),H=s()(t,m,0),K=s()(t,g,0);if(A){const re=t.candidates.map(M=>{const N=s()(M,b,0),Z=s()(M,"major_party",""),le=(0,ae.default)(Z);return{bgColor:G(le),lastName:s()(M,"family_name",null),percent:`${N}%`,percentInt:N}}),ne=W()(re,["percentInt"],["desc"]);a.set(V,{color:Y,position:"left",votes:H,value:H,percent:`${K}%`,percentInt:K,description:U,candidates:ne})}}),a},Fe=(t,a,n,o)=>{let m,g,L=!1;const V=[...n].map(([,U])=>se({},U));if(L=!!(n&&n.size&&V.some(U=>U.votes)&&o!=="2022"),L){const Y=[],b=[],A=V.filter(K=>K.description!=="Provisional"||K.percentInt>=1);W()(A,["votes","description"],["desc","desc"]).forEach(K=>{(K.description!=="Provisional"||K.percentInt>=1)&&(Y.push(K),b.push(K.percentInt))}),m=`${t}%`,g=Ee(m,Y,!0)}else m=`${t}%`,g=Ee(m,[{color:"#EEB900",position:"left",value:a,percent:m}]);return{percentInFormatted:m,percentInChart:g,usesVoteModes:L,percentIn:t}},be=(t,a)=>{const n=s()(t,"percent_in",0),o=s()(t,"total_vote",0),m=Ze(t);return Fe(n,o,m,a)},Be=t=>{let a=null;const n=s()(t,"candidates",[]),o=s()(t,"call_status",""),m=(0,E.default)(o)==="Runoff",g=n.filter(L=>(0,E.default)(L.call_status)==="Advance");return m&&g&&g.length&&(g.length>1?a="advance":a="advances"),a},Ve=(t,a,n,o)=>{const V=s()(t,"office_code",""),U=s()(t,"election_type",""),Y=s()(t,"candidates",[]),b=s()(t,"state_code",""),A=s()(t,"polls_close",""),H=(0,Q.getPollClosedFormatted)(A,t.election_date,o),K=Le({officeCode:V,stateName:a,stateNameSlug:n}),{number:re,showPopularVoteLabel:ne}=q(t,b),M=Y.filter(de=>de.candidate_code===1036||de.candidate_code===8639).map(de=>De(de,V,U,!1,b)),N=W()(M,["vote","order"],["desc","asc"]),Z=be(t),le=s()(t,"remaining_vote")||s()(t,"remaining_total_expected_vote",0),oe=Ue(le);return se(se(se({},Z),K),{},{callStatusCode:t.call_status,callStatusText:(0,E.default)(t.call_status)||"",totalElectoralVotes:re,showPopularVoteLabel:ne,candidates:N,estimatedVotesRemaining:oe,pollsCloseUTC:A,pollsCloseFormatted:H})},Oe=(t,a,n,o,m=!1,g=null,L={})=>{const V=s()(t,"race_name",""),U=s()(t,"office_code",""),Y=s()(t,"call_status",""),b=t?.allow_multi_winners??!1,A=t?.election_date,H=t?.election_type,K=(0,E.default)(Y)||null,re=(0,j.getStateAbbreviationByStateName)(n),ne=(0,ve.getYearFromElectionDate)(A),M=s()(t,"polls_close_utc",""),N=(0,S.default)({races:[{polls_close_utc:M}],electionDate:A,currentTime:o,stateCode:re}),Z=t.election_type===l.ELECTION_TYPE_CODES.GENERAL_RUNOFF,le=Le({officeCode:U,stateNameSlug:a,isRunoff:Z,electionSeason:ne,electionTypeCode:H});let oe=(0,_e.formatCandidates)({race:t,headshots:g,colors:L});m||(oe=oe.slice(0,2));const de=be(t,ne),w=s()(t,"remaining_vote")||s()(t,"remaining_total_expected_vote",0),pe=s()(t,"gain",!1)&&!(0,ue.default)({stateAbbr:re,officeCode:U})?(0,ae.default)(s()(t,"party",null)):null,Re=Be(t),Ae=Ue(w),Ie=oe.find(Je=>Je.isWinner)?.colorHex||null;return se(se(se({},de),le),{},{allowMultiWinners:b,callStatusCode:Y,callStatusText:K,candidates:oe,electionTypeCode:t.election_type,raceId:t.race_id,estimatedVotesRemaining:Ae,partyGain:pe||null,pollsCloseFormatted:N,pollsCloseUTC:M,raceName:V,runoff:Re,stateName:n,winnerColor:Ie,district:U===l.OFFICE_CODES.HOUSE?t.jcode:null})},Ye=(t,a,n,o,m)=>{const g=s()(t,"race_name",""),L=s()(t,"office_code",""),V=s()(t,"election_type",""),U=s()(t,"candidates",[]),Y=s()(t,"call_status",""),b=(0,E.default)(Y)||null,A=(0,j.getStateAbbreviationByStateName)(n),H=s()(t,"polls_close",""),K=(0,Q.getPollClosedFormatted)(H,t.election_date,o),re=t.election_type===l.ELECTION_TYPE_CODES.GENERAL_RUNOFF,ne=Le({officeCode:L,stateNameSlug:a,isRunoff:re}),M=!0,le=W()(U,["vote","order"],["desc","asc"]).slice(0,2).map(Ae=>De(Ae,L,V,M,A,m)),oe=be(t,m),de=t.remaining_vote??t.remaining_total_expected_vote??0,ie=s()(t,"gain",!1)&&!(0,ue.default)({stateAbbr:A,officeCode:L})?(0,ae.default)(s()(t,"party",null)):null,pe=Be(t),Re=Ue(de);return se(se(se({},oe),ne),{},{stateCode:A,callStatusCode:Y,callStatusText:b,candidates:le,electionTypeCode:t.election_type,raceId:t.race_id,estimatedVotesRemaining:Re,partyGain:ie||null,pollsCloseFormatted:K,raceName:g,runoff:pe})},Xe=(t,a,n,o)=>{const m=s()(t,"office_code",""),g=s()(t,"races",[]),L=Le({officeCode:m,stateNameSlug:a,electionSeason:o}),V=o>=2022?"polls_close_utc":"polls_close";g.sort((w,ie)=>z()(w[V]).isBefore(ie[V])?-1:1);const U=s()(g,"[0].election_date",null),Y=s()(g,"[0].state_abbr",null),b=(0,S.default)({currentTime:n,electionDate:U,races:g,stateCode:Y}),A=g.reduce((w,ie)=>{const{gain:pe}=w;let{runoffTotal:Re,uncalledTotal:Ae}=w;const Ie=s()(ie,"party",""),Ge=s()(ie,"call_status",""),Je=(0,h.default)(Ge),pt=F(Ge);return s()(ie,"gain",!1)&&(pe[Ie]=pe[Ie]?pe[Ie]+1:1),Je?w[Ie]=w[Ie]?w[Ie]+1:1:pt?Re+=1:Ae+=1,se(se({},w),{},{gain:pe,runoffTotal:Re,uncalledTotal:Ae})},{gain:{},runoffTotal:0,uncalledTotal:0}),{gain:H,runoffTotal:K,uncalledTotal:re}=A,ne=(0,i.default)(A,me),M=Object.keys(ne).map(w=>{const ie=A[w],pe=(0,ae.default)(w),Re=G(pe,o),Ae=H[w]||0;return{party:pe,bgClass:Re,totalSeats:ie,totalGain:Ae}}),N=g.length,Z=N===1,le=M.some(w=>w.totalSeats>30),oe=!v()(ne),de=M.sort((w,ie)=>ie.totalSeats-w.totalSeats);return se(se({},L),{},{seats:{runoffTotal:K,uncalledTotal:re,winners:M,sortedWinners:de,hasOneSeat:Z,isLargeSeatAmount:le,hasCalls:oe,totalOverallSeats:N},pollsCloseFormatted:b})},Ke=t=>t.find(n=>n.office_code===fe)?t.reduce((n,o)=>{const[m,...g]=n;return o.office_code!==fe?g.push(o):m.races.push(o),[m,...g]},[{office_code:fe,races:[]}]):t,Qe=({race:t,stateName:a,stateNameSlug:n,currentTime:o=new Date().toISOString()})=>!t||!I.includes(t.office_code)?null:Oe(t,n,a,o);function We({races:t,stateAbbr:a,currentTime:n,headshots:o,colors:m}){return t?.map(g=>Oe(g,(0,j.getStateNameSlugByStateAbbreviation)(a),(0,j.getStateNameByStateAbbreviation)(a),n,!0,o,m))??[]}const et=(t,a,n,o=[],m=!1,g=new Date().toISOString(),L,V=!1,U=!1,Y=null,b)=>{if(!t||!t.length)return{};const A=U?$:I,H=t.filter(N=>A.includes(N.office_code));if(!H.length)return{};const K=H.map(N=>{if(!m)return N;const Z=(0,f.getOfficeCodeFromRaceId)(N.race_id);return o.find(oe=>(0,f.getOfficeCodeFromRaceId)(oe.race_id)===Z)||N});return{races:Ke(K).sort((N,Z)=>A.indexOf(N.office_code)-A.indexOf(Z.office_code)).map(N=>{const{office_code:Z,election_type:le}=N;if((0,k.isPresidentialPrimary)({officeCode:Z,electionTypeCode:le}))return Oe(N,n,a,g,!0,Y,b);switch(Z){case Me:return Ve(N,a,n,g);case fe:return Xe(N,n,g,L);default:return Oe(N,n,a,g,V,Y,b)}})}},_t=({race:t,stateName:a,stateNameSlug:n,electionSeason:o,currentTime:m=new Date().toISOString()})=>!t||!I.includes(t.office_code)?null:Ye(t,n,a,m,o),yt=et;var tt=e("./node_modules/dayjs/plugin/utc.js"),st=e.n(tt),nt=e("./server/v2/helpers/getFormattedTimestamp.js");z().extend(st()),z().extend(X());const $e=t=>t?z()(t).isValid():!1,ot=(t,a)=>{const n=z()(t),o=z()(a);return n.isAfter(o)},Ct=(...t)=>t.filter(o=>$e(o)).map(o=>z()(o)).reduce((o,m)=>m&&o.isBefore(m)?o:m),at=(t,a)=>{if(!$e(a))return;const n=!$e(t.lastModified),o=ot(a,t.lastModified);(n||o)&&Object.assign(t,{lastModified:a,lastModifiedFormatted:(0,nt.getFormattedTimestampUTC)(a,t.language)})};var rt=e("./components/modules/PageHeader/2022/scenarios/mock.json");const lt=["electionSeason","stateAbbr","voteTotal","votesRemaining","percentIn","callStatus","partyGain","electionTypeCode","officeCode"],it=["title","description","hasDivider","showResults","usePageAnchors","electionDate","lastModifiedTime","lastModifiedDate","pollsClose","currentDate","currentTime"];var we=O.createElement;function ke(t,a){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);a&&(o=o.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),n.push.apply(n,o)}return n}function Pe(t){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?ke(Object(n),!0).forEach(function(o){(0,d.default)(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}B.dayJsCustom.extend(X());const He=[{code:19305,name:"Adam Laxalt",firstName:"Adam",lastName:"Laxalt",party:"gop",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_R_A_LAXALT.png"},{code:65148,name:"Catherine Cortez Masto",firstName:"Catherine",lastName:"Cortez Masto",party:"dem",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_D_C_CORTEZMASTO.png"},{code:20074049,name:"Barry Rubinson",firstName:"Barry",lastName:"Rubinson",party:"iap",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_I_B_RUBINSON.png"},{code:497,name:"Neil Scott",firstName:"Neil",lastName:"Scott",party:"lib",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_I_N_SCOTT.png"},{code:100013,name:"None of these candidates",firstName:"",lastName:"None of these candidates",party:"non",hide:!0,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_I__NONEOFTHESECANDIDATES.png"}],dt=He.reduce((t,a,n)=>{const o=`Candidate ${n+1}`,m={category:o};return t[`${o} Hide`]={table:m,control:"boolean"},t[`${o} Vote Share`]={table:m,control:{type:"range",min:0,max:100,step:1}},t[`${o} Is Incumbent`]={table:m,control:"boolean"},t[`${o} Party`]={table:m,control:{type:"text"}},t[`${o} Call Status`]={table:m,control:{type:"select"},options:Pe({NONE:""},l.CALL_STATUSES)},t},{}),ct=He.reduce((t,a,n)=>{const o=`Candidate ${n+1}`;return t[`${o} Hide`]=a.hide,t[`${o} Vote Share`]=50,t[`${o} Is Incumbent`]=n===0,t[`${o} Party`]=a.party,t[`${o} Call Status`]=n===0?l.CALL_STATUSES.WINNER:"",t},{}),ut={component:y.default,title:"Global Components/Page Header/2022",argTypes:Pe({electionDate:{name:"Election Date (ET)",control:{type:"text"},table:{category:"Timestamps"}},lastModifiedTime:{name:"Last Modified Time (ET)",control:{type:"text"},table:{category:"Timestamps"}},lastModifiedDate:{name:"Last Modified Date (ET)",control:{type:"text"},table:{category:"Timestamps"}},pollsClose:{name:"Polls Close (ET)",control:{type:"object"},table:{category:"Timestamps"}},currentDate:{name:"Current Date (ET)",control:{type:"text"},table:{category:"Timestamps"}},currentTime:{name:"Current Time (ET)",control:{type:"text"},table:{category:"Timestamps"}},stateAbbr:{name:"State",options:j.usStateAbbreviations,table:{category:"Results"},control:{type:"select"}},voteTotal:{control:{type:"number"},table:{category:"Results"}},votesRemaining:{control:{type:"number"},table:{category:"Results"}},percentIn:{control:{type:"number",min:0,max:100,step:1},table:{category:"Results"}},callStatus:{control:{type:"select"},options:Pe({NONE:""},l.CALL_STATUSES),table:{category:"Results"}},partyGain:{control:"boolean",table:{category:"Results"}},electionTypeCode:{options:l.ELECTION_TYPE_CODES,control:{type:"select"},table:{category:"Results"}},officeCode:{options:l.OFFICE_CODES,table:{category:"Results"},control:{type:"select"}}},dt),args:Pe({title:"Texas Governor election results 2022",description:'<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. <a href="#">Ut enim</a> ad minim veniam.</p>',hasDivider:!1,showResults:!0,usePageAnchors:!0,electionDate:"2022-11-08",lastModifiedTime:"17:57:00",lastModifiedDate:"2022-11-08",pollsClose:["20:00:00","19:00:00"],currentDate:"2022-11-08",currentTime:"18:00:00",stateAbbr:"TX",voteTotal:1e6,votesRemaining:543210,percentIn:50,callStatus:l.CALL_STATUSES.WINNER,partyGain:!1,electionTypeCode:l.ELECTION_TYPE_CODES.GENERAL_ELECTION,officeCode:l.OFFICE_CODES.GOVERNOR},ct),parameters:{controls:{exclude:["electionType","className","headshots","electionSeason","houseSeats","hidePollsClose","hideTranslateLink","lastModified","lastModifiedFormatted","pollsCloseFormatted","showLiveTag","stateName","stateResultsSummary","titleTag","currentUrlPath","hasTease"]},status:{type:"deprecated"}}},qe=new Map(Object.entries({breakdown:{id:"breakdown",title:"County breakdown",enabled:!0},polls:{id:"polls",title:"Exit polls",enabled:!0},voted:{id:"voted",title:"How Texas voted",enabled:!0}}));function mt(t,a){let{electionSeason:n,stateAbbr:o,voteTotal:m,votesRemaining:g,percentIn:L,callStatus:V,partyGain:U,electionTypeCode:Y,officeCode:b}=a,A=(0,i.default)(a,lt);if(!t)return{};const H=He.map((M,N)=>{const Z=`Candidate ${N+1}`,le=A[`${Z} Hide`],oe=A[`${Z} Vote Share`],de=A[`${Z} Is Incumbent`],w=A[`${Z} Party`],ie=A[`${Z} Call Status`];return Pe(Pe({},M),{},{callStatus:ie,isWinner:l.WINNING_CALL_STATUSES.includes(ie),bgColor:G(w,n),isIncumbent:de,party:w,voteShare:oe,hide:le})}),K=H.reduce((M,N)=>M+N.voteShare,0);H.forEach(M=>{M.votes=Math.round(M.voteShare/K*m),M.percentVote=parseFloat((M.voteShare/K*100).toFixed(1)),M.formattedPercentVote=`${M.percentVote}%`});const re=l.PRIMARY_ELECTION_TYPE_CODES.includes(Y)?"primary":"general",ne=Array.from(H.filter(M=>!M.hide)).sort((M,N)=>N.votes-M.votes);return{officeCode:b,stateAbbr:o,electionType:re,headshots:rt.headshots,stateResultsSummary:[{percentInFormatted:`${L}%`,percentInChart:{maxValue:100,caret:{percent:`${L}%`},showLegend:!1,values:[{color:"#EEB900",position:"left",value:m,percent:`${L}%`}]},electionTypeCode:Y,officeCode:b,usesVoteModes:!1,office:l.OFFICE_NAMES[b],headlineText:l.OFFICE_NAMES[b],linkText:"Race Details",callStatusCode:V,callStatusText:(0,E.default)(V),candidates:ne,raceId:`2022-11-08~${o}~${b}`,estimatedVotesRemaining:{value:g,displayString:g>0?g.toLocaleString():null},partyGain:U?"someparty":null,raceName:l.OFFICE_NAMES[b],runoff:Be({call_status:V,candidates:ne.map(M=>({call_status:M.callStatus}))})}]}}function ft({pollsClose:t,date:a,time:n,electionDate:o,lastModifiedTime:m,lastModifiedDate:g}){const L=B.dayJsCustom.tz(`${a}T${n}`,"America/New_York").toISOString(),V=a.slice(0,4),U={},Y=B.dayJsCustom.tz(`${g}T${m}`,"America/New_York").toISOString();at(U,Y);const b=t.map(H=>({polls_close_utc:B.dayJsCustom.tz(`${o}T${H}`,"America/New_York").toISOString()})),A=(0,S.default)({races:b,electionDate:o,currentTime:L});return Pe({currentTime:L,electionSeason:V,pollsCloseFormatted:A},U)}const ze=t=>{let{title:a,description:n,hasDivider:o,showResults:m,usePageAnchors:g,electionDate:L,lastModifiedTime:V,lastModifiedDate:U,pollsClose:Y,currentDate:b,currentTime:A}=t,H=(0,i.default)(t,it);const K=ft({pollsClose:Y,electionDate:L,date:b,time:A,lastModifiedTime:V,lastModifiedDate:U});return we(R.PageAnchorContext.Provider,{value:{addAnchor(){},anchors:qe}},we(y.default,(0,_.default)({electionDate:L,title:a,description:n,links:qe,hasDivider:o,usePageAnchors:g},K,mt(m,Pe(Pe({},K),H)))))};ze.displayName="AllOptions",ze.parameters={knobs:{escapeHTML:!1}};const Et=["AllOptions"]},"./components/MapKey/constants.js":(J,r,e)=>{e.r(r),e.d(r,{BUTTON_LABELS:()=>i,VIZ_VIEWS:()=>_});const _={DEFAULT:"default",SIZE_OF_LEAD:"size-of-lead",REMAINING_VOTE:"remaining-votes"},i={[_.SIZE_OF_LEAD]:"Size of lead",[_.REMAINING_VOTE]:"Est. Remaining votes"}},"./components/NumberChange/NumberChangeAnimation.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>y});var _=e("./node_modules/prop-types/index.js"),i=e.n(_),d=e("./node_modules/next/dist/compiled/react/index.js"),O=e("./components/hooks/usePrevious.js"),D=e("./components/NumberChange/voteDropFormats.js");function X({previousValue:S,currentValue:R,durationMs:l,isPercent:B}){const{0:j,1:P}=(0,d.useState)(S??R),W=(0,d.useRef)();return(0,d.useEffect)(()=>()=>{cancelAnimationFrame(W.current)},[]),(0,d.useEffect)(()=>{let C,s,T=!1;const v=R-S;if(!v||S==null)return;const x=v/l;function z(ee){C===void 0&&(C=ee);const q=ee-C,f=(v>0?Math.min:Math.max)(x*q,v),E=B?f:~~f,h=S+E;s!==ee&&(P(h),f===v&&(T=!0)),q<l?(s=ee,W.current=T?null:requestAnimationFrame(z)):h!==R&&P(S+v)}W.current=requestAnimationFrame(z)},[S,R,B,l]),j}function y({animationDelayMs:S,animateInitialValue:R,children:l,durationMs:B,isPercent:j,value:P}){const{0:W,1:C}=(0,d.useState)(R?0:P);(0,d.useEffect)(()=>{let x;return S>0&&R&&W===0?x=setTimeout(()=>{C(P)},S):C(P),()=>{clearTimeout(x)}},[R,S,P]);const s=(0,O.default)(W),T=X({previousValue:s,currentValue:W,durationMs:B,isPercent:j,step:1}),v=j?(0,D.formatPercent)(T):T;return l(v)}y.propTypes={animationDelayMs:i().number,children:i().func.isRequired,durationMs:i().number,isPercent:i().bool,value:i().number},y.defaultProps={animationDelayMs:void 0,durationMs:1500,isPercent:!1,value:0}},"./components/NumberChange/NumberChangeFlyout.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>P});var _=e("./node_modules/styled-jsx/style.js"),i=e.n(_),d=e("./node_modules/next/dist/compiled/react/index.js"),O=e("./node_modules/classnames/index.js"),D=e.n(O),X=e("./node_modules/prop-types/index.js"),y=e.n(X),S=e("./components/hooks/usePrevious.js"),R=e("./components/NumberChange/voteDropFormats.js"),l=e("./components/icons/Plus.js"),B=e("./components/icons/Minus.js"),j=d.createElement;function P({enabled:W,backgroundColor:C,className:s,children:T,delayMs:v,durationMs:x,isPercent:z,value:ee,topEnd:q,topStart:u}){const f=(0,S.default)(ee),E=ee-f,{0:h,1:Q}=(0,d.useState)(E);(0,d.useEffect)(()=>{const ce=setTimeout(()=>{Q(E)},v+x);return()=>{clearTimeout(ce)}},[E,x,v]);const te=z?R.formatPercent:R.formatNumber,ae=W&&!!E&&E!==h;return j(d.Fragment,null,j(i(),{id:"3812971847",dynamic:[u,q,x,v]},[`.vote-drop-container.__jsx-style-dynamic-selector{--vd-top-start:${u};--vd-top-end:${q};--vd-duration:${x}ms;--vd-delay:${v}ms;}`]),j(i(),{id:"3609745932"},[".vote-drop{-webkit-transform:translateY(var(--vd-top-end));-ms-transform:translateY(var(--vd-top-end));transform:translateY(var(--vd-top-end));white-space:nowrap;line-height:1em;-webkit-letter-spacing:0.04em;-moz-letter-spacing:0.04em;-ms-letter-spacing:0.04em;letter-spacing:0.04em;opacity:0;-webkit-animation:var(--vd-duration) ease-in-out vote-drop-fade;animation:var(--vd-duration) ease-in-out vote-drop-fade;-webkit-animation-delay:var(--vd-delay);animation-delay:var(--vd-delay);padding:2px 4px;top:0;right:0;box-shadow:0 2px 4px rgba(0,0,0,0.25);}",".vote-drop svg{margin-right:4px;}","@-webkit-keyframes vote-drop-fade{0%{opacity:0;-webkit-transform:translateY(var(--vd-top-start));-ms-transform:translateY(var(--vd-top-start));transform:translateY(var(--vd-top-start));}25%{-webkit-transform:translateY(var(--vd-top-end));-ms-transform:translateY(var(--vd-top-end));transform:translateY(var(--vd-top-end));opacity:1;}70%{opacity:1;}100%{opacity:0;}}","@keyframes vote-drop-fade{0%{opacity:0;-webkit-transform:translateY(var(--vd-top-start));-ms-transform:translateY(var(--vd-top-start));transform:translateY(var(--vd-top-start));}25%{-webkit-transform:translateY(var(--vd-top-end));-ms-transform:translateY(var(--vd-top-end));transform:translateY(var(--vd-top-end));opacity:1;}70%{opacity:1;}100%{opacity:0;}}"]),j("div",{className:"jsx-3609745932 "+i().dynamic([["3812971847",[u,q,x,v]]])+" "+(D()("relative vote-drop-container",s)||"")},ae&&j("div",{style:{backgroundColor:C},key:`${E}-${ee}`,className:"jsx-3609745932 "+i().dynamic([["3812971847",[u,q,x,v]]])+" f2 fw6 absolute vote-drop white br1 founders-cond df items-center z-1"},E>0?j(l.default,null):j(B.default,null),te(Math.abs(E)),z?"%":""),j("div",{className:"jsx-3609745932 "+i().dynamic([["3812971847",[u,q,x,v]]])},T)))}P.propTypes={backgroundColor:y().string,children:y().node.isRequired,className:y().string,delayMs:y().number,durationMs:y().number,enabled:y().bool,isPercent:y().bool,topEnd:y().oneOfType([y().string,y().number]),topStart:y().oneOfType([y().string,y().number]),value:y().number.isRequired},P.defaultProps={backgroundColor:"#5C5C5C",className:null,delayMs:1250,durationMs:3500,enabled:!0,topEnd:"-100%",topStart:0,isPercent:!1}},"./components/NumberChange/NumberChangeHighlight.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>l});var _=e("./node_modules/styled-jsx/style.js"),i=e.n(_),d=e("./node_modules/next/dist/compiled/react/index.js"),O=e("./node_modules/prop-types/index.js"),D=e.n(O),X=e("./node_modules/classnames/index.js"),y=e.n(X),S=e("./components/hooks/usePrevious.js"),R=d.createElement;function l({children:B,className:j,durationMs:P,backgroundColor:W,value:C}){const s=(0,S.default)(C),T=C-s,{0:v,1:x}=(0,d.useState)(T);(0,d.useEffect)(()=>{const ee=setTimeout(()=>{x(T)},P);return()=>{clearTimeout(ee)}},[T,P]);const z=!!T&&T!==v;return R(d.Fragment,null,R(i(),{id:"1306642834",dynamic:[P]},[`.number-change-bg.__jsx-style-dynamic-selector{top:0;bottom:0;left:0;right:0;z-index:-1;opacity:0;-webkit-animation:${P}ms number-change-fade-__jsx-style-dynamic-selector;animation:${P}ms number-change-fade-__jsx-style-dynamic-selector;}`,"@-webkit-keyframes number-change-fade-__jsx-style-dynamic-selector{0%{opacity:0;}50%{opacity:0.2;}100%{opacity:0;}}","@keyframes number-change-fade-__jsx-style-dynamic-selector{0%{opacity:0;}50%{opacity:0.2;}100%{opacity:0;}}"]),R("div",{className:i().dynamic([["1306642834",[P]]])+" "+(y()("number-change relative z-0",j)||"")},z&&R("div",{key:`${T}-${C}`,style:{backgroundColor:W},className:i().dynamic([["1306642834",[P]]])+" number-change-bg absolute"}),B))}l.propTypes={backgroundColor:D().string,children:D().node.isRequired,className:D().string,durationMs:D().number,value:D().number},l.defaultProps={backgroundColor:"#5C5C5C",className:null,durationMs:1500,value:0}},"./components/NumberChange/voteDropFormats.js":(J,r,e)=>{e.r(r),e.d(r,{formatNumber:()=>i,formatPercent:()=>d});var _=e("./node_modules/d3-format/src/defaultLocale.js");const i=(0,_.format)(","),d=O=>parseFloat(O).toFixed(1)},"./components/hooks/usePrevious.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>i});var _=e("./node_modules/next/dist/compiled/react/index.js");function i(d){const O=(0,_.useRef)();return(0,_.useEffect)(()=>{O.current=d},[d]),O.current}},"./components/hooks/useResizeObserver.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>i});var _=e("./node_modules/next/dist/compiled/react/index.js");function i({container:d,onResize:O}){(0,_.useEffect)(()=>{if(!d.current)return;const D=new ResizeObserver(O);return D.observe(d.current),()=>{D.disconnect()}},[O])}},"./components/icons/ChevronThinRight.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>O});var _=e("./node_modules/next/dist/compiled/react/index.js"),i=_.createElement;const d=({className:D})=>i("svg",{className:`chevron-thin-right ${D}`,width:"6",height:"10",viewBox:"0 0 13 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M9.85519 10.8005L0.571793 1.70003L2.00001 0.299957L12.7116 10.8005L2.00001 21.301L0.571794 19.901L9.85519 10.8005Z"}));d.displayName="ChevronThinRight";const O=d},"./components/icons/Minus.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>d});var _=e("./node_modules/next/dist/compiled/react/index.js"),i=_.createElement;function d(){return i("svg",{width:"6",height:"2",viewBox:"0 0 6 2",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i("line",{x1:"0.00012207",y1:"1.25",x2:"6.00012",y2:"1.25",stroke:"currentColor",strokeWidth:"1.5"}))}d.displayName="MinusIcon"},"./components/icons/Plus.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>d});var _=e("./node_modules/next/dist/compiled/react/index.js"),i=_.createElement;function d(){return i("svg",{width:"7",height:"7",viewBox:"0 0 7 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.14075 3.65625V6.5H4.3595V3.65625H7.00012V2.4375H4.3595V0H3.14075V2.4375H0.500122V3.65625H3.14075Z",fill:"currentColor"}))}d.displayName="PlusIcon"},"./components/modules/ResultsSummary/utils.js":(J,r,e)=>{e.r(r),e.d(r,{COLUMN_HEADER_LABELS:()=>ve,COLUMN_HEADER_TYPE:()=>_e,COUNTDOWN_THRESHOLD_SECONDS:()=>ae,calculateCountdown:()=>ce,formatPrimaryWinnerMessage:()=>f,getColumnHeaderId:()=>k,getFirstInitialName:()=>ge,getLongestInitials:()=>he,getLongestName:()=>fe,getPartyAbbreviation:()=>je,getPartyFromElectionTypeCode:()=>me,getPartyInitial:()=>Se,getRaceCallText:()=>E,getRaceCharacterization:()=>q,getRaceSummaryId:()=>te,getRaceTitleOverride:()=>Te,getSkipButtonText:()=>h,getValueForRow:()=>Ne,goesToRunoff:()=>v,isMultiWinner:()=>T,isPartisanRace:()=>u,isPresidentialPrimary:()=>x,showDelegateCount:()=>se,showPartyName:()=>ye,useCountdown:()=>ue});var _=e("./node_modules/dayjs/plugin/utc.js"),i=e.n(_),d=e("./node_modules/dayjs/plugin/relativeTime.js"),O=e.n(d),D=e("./node_modules/next/dist/compiled/react/index.js"),X=e("./node_modules/lodash-es/kebabCase.js"),y=e("./node_modules/lodash-es/padStart.js"),S=e("./node_modules/lodash-es/orderBy.js"),R=e("./lib/dayjsCustom.js"),l=e("./helpers/constants.js"),B=e("./helpers/pluralize.js"),j=e("./helpers/stateNameUtilities.js"),P=e("./helpers/determineOfficeType.js"),W=e("./server/v2/helpers/geography.js"),C=e("./components/MapKey/constants.js"),s=e("./server/v2/helpers/isNonPartisanRace.js");R.dayJsCustom.extend(O()),R.dayJsCustom.extend(i());function T({allowMultiWinners:c,callStatusCode:p}){return c&&l.RUNOFF_CALL_STATUSES.includes(p)}function v({allowMultiWinners:c,callStatusCode:p}){return!c&&l.RUNOFF_CALL_STATUSES.includes(p)}function x({officeCode:c,electionTypeCode:p}){return c===l.OFFICE_CODES.PRESIDENT&&l.PRIMARY_ELECTION_TYPE_CODES.includes(p)}const z=[l.CALL_STATUSES.TOO_EARLY_TO_CALL,l.CALL_STATUSES.TOO_CLOSE_TO_CALL],ee=({stateAbbr:c,officeCode:p,isRunoff:I})=>`${(0,j.getStateNameByStateAbbreviation)(c)} ${(0,P.default)(p).toLowerCase()}${I?" runoff":""} election`;function q({callStatusCode:c}){if(!z.includes(c))return"";let p;switch(c){case l.CALL_STATUSES.TOO_CLOSE_TO_CALL:p="Too close to call";break;case l.CALL_STATUSES.TOO_EARLY_TO_CALL:p="Too early to call";break;default:p=""}return p.toUpperCase()}function u(c){return l.DEMOCRATIC_ELECTION_TYPES.includes(c)||l.REPUBLICAN_ELECTION_TYPES.includes(c)}function f(c,p,I){const $=[l.ELECTION_TYPE_CODES.DEMOCRATIC_CAUCUS,l.ELECTION_TYPE_CODES.REPUBLICAN_CAUCUS].includes(I)?"caucus":"primary";return`the ${c} ${$}${p?" special":""}`}function E({allowMultiWinners:c,winningCandidates:p,callStatusCode:I,stateAbbr:$,electionTypeCode:F,officeCode:G}){const Ee=v({allowMultiWinners:c,callStatusCode:I}),De=T({allowMultiWinners:c,callStatusCode:I}),xe=l.RUNOFF_ELECTION_TYPE_CODES.includes(F),Le=l.WINNING_CALL_STATUSES.includes(I)&&c&&p.length,Ue=!p.length||!l.WINNING_CALL_STATUSES.includes(I)&&!De&&!Ee;if(u(F)&&Ue)return"";if(Ue)return q({callStatusCode:I});const Fe=l.PRIMARY_ELECTION_TYPE_CODES.includes(F),be=l.SPECIAL_ELECTION_TYPE_CODES.includes(F),Be=De||Ee?`${(0,B.default)("is",p.length)} advancing`:(0,B.default)("wins",p.length),Ve=(0,j.getStateNameByStateAbbreviation)($);let Oe="";De||Ee?Oe=De?`to the ${be?"special":"general"} election`:"to the runoff":Fe&&!Le?Oe=f(Ve,be,F):Oe=`the ${ee({stateAbbr:$,officeCode:G,isRunoff:xe})}`;const Ye=p.map(We=>We.name.toUpperCase()),Ke=`${new Intl.ListFormat("en",{style:"long",type:"conjunction"}).format(Ye)} ${Be} ${Oe}`,Qe=Fe&&!De&&!Le;return p.length>1||!Qe?Ke:Ke.toUpperCase()}function h({electionTypeCode:c,officeCode:p,geography:I}){const $=(0,W.getSingularReportingType)(I);let F="";const G=x({electionTypeCode:c,officeCode:p});return l.DEMOCRATIC_ELECTION_TYPES.includes(c)?F=G?"REPUBLICANS":"DEM ":l.REPUBLICAN_ELECTION_TYPES.includes(c)&&(F=G?"DEMOCRATS":"GOP "),G?`Skip to ${F||"results"}`:`Skip to ${F}${$} results`}const Q={REP:"republican-primary",DEM:"democratic-primary"},te=({electionTypeCode:c,officeCode:p,raceName:I,invertParty:$=!1})=>{let F=I;const G=$&&x({electionTypeCode:c,officeCode:p});return l.DEMOCRATIC_ELECTION_TYPES.includes(c)?F=G?Q.REP:Q.DEM:l.REPUBLICAN_ELECTION_TYPES.includes(c)&&(F=G?Q.DEM:Q.REP),(0,X.default)(F)},ae=3600;function ce({pollsCloseTime:c}){const p=R.dayJsCustom.utc(c),I=(0,R.dayJsCustom)(p).diff((0,R.dayJsCustom)(),"s");if(I>=ae)return null;if(I<=0)return"";const $=parseInt(I/60%60,10),F=parseInt(I%60,10);return`Polls close in ${(0,y.default)($,2,"0")}:${(0,y.default)(F,2,"0")}`}function ue({pollsCloseUTC:c}){const p=(0,D.useMemo)(()=>R.dayJsCustom.utc(c),[c]),{0:I,1:$}=(0,D.useState)(ce({pollsCloseTime:p}));return(0,D.useEffect)(()=>{const F=setInterval(()=>{const G=ce({pollsCloseTime:p});$(G),G===""&&clearInterval(F)},1e3);return()=>{clearInterval(F)}},[p]),I}const _e={AREA:"area",CANDIDATE:"candidate",DELEGATES:"delegates",VOTES:"votes",PERCENTAGE:"percentage"},ve={VOTE_LEAD:"Vote lead",PCT_LEAD:"Margin",REMAINING_VOTE:"Estimated remaining votes"};function k({id:c,type:p}){return`${c}-column-${p}`}function me(c){return l.DEMOCRATIC_ELECTION_TYPES.includes(c)?"Democrats":l.REPUBLICAN_ELECTION_TYPES.includes(c)?"Republicans":null}function Te({stateAbbr:c,officeCode:p,electionTypeCode:I}){const $=p===l.OFFICE_CODES.PRESIDENT,F=I===l.ELECTION_TYPE_CODES.REPUBLICAN_CAUCUS,G=I===l.ELECTION_TYPE_CODES.REPUBLICAN_PRIMARY,Ee=["NV","MI"].includes(c);return $&&F&&Ee?"Republican Caucus":$&&G&&Ee?"Republican Primary":null}function se({electionTypeCode:c,officeCode:p,stateAbbr:I}){const $=p===l.OFFICE_CODES.PRESIDENT,F=c===l.ELECTION_TYPE_CODES.REPUBLICAN_PRIMARY;return $&&F&&I==="NV"?!1:x({officeCode:p,electionTypeCode:c})}const Me=[l.ELECTION_TYPE_CODES.JUNGLE_PRIMARY_SPECIAL,l.ELECTION_TYPE_CODES.JUNGLE_PRIMARY,l.ELECTION_TYPE_CODES.GENERAL_SPECIAL_ELECTION],Ce=["none of these candidates","no preference","write-ins","none of above","uncommitted"];function ye({electionTypeCode:c,officeCode:p,stateAbbr:I,name:$}){return Me.includes(c)&&!(0,s.default)({officeCode:p,stateAbbr:I})&&!Ce.includes($.toLowerCase())}function ge(c){return!c.firstName||Ce.includes(c.name.toLowerCase())?c.lastName:`${c.firstName[0]}. ${c.lastName}`}function fe(c){return(0,S.default)(c,[p=>p.name.length],["desc"])[0]?.name??""}function he(c){return(0,S.default)(c.map(p=>ge(p)),[p=>p.length],["desc"])[0]??""}function je(c){if(!c)return"IND";switch(c.toLowerCase()){case"gop":case"rep":return"GOP";case"dem":return"DEM";default:return"IND"}}function Se(c){switch(c?.toLowerCase()){case"gop":case"rep":return"R";case"dem":return"D";default:return"I"}}const Ne=({percentVote:c,votes:p,leadByVotes:I,leadByPercent:$,valueType:F,view:G})=>{switch(G){case C.VIZ_VIEWS.SIZE_OF_LEAD:return F===_e.PERCENTAGE?$:I;default:return F===_e.PERCENTAGE?c:p}}},"./components/providers/EmbedContext.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>i});var _=e("./node_modules/next/dist/compiled/react/index.js");const i=_.createContext({isEmbed:!1,isPartner:!1,isInSpanish:!1,useLinkTarget:!1})},"./helpers/getIsWinner.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>i});const i=(d="")=>["A","P","W"].includes(d)},"./helpers/getNeatVoteModes.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>D,getSupportedVoteModes:()=>X});var _=e("./node_modules/lodash.get/index.js"),i=e.n(_);const d=JSON.parse('{"electionDay":"#E89900","electionDayLight":"#FDF7EB","earlyByMail":"#73A60F","earlyByMailLight":"#F4F8EC","earlyInPerson":"#BE57A1","earlyInPersonLight":"#FAF2F7","provisional":"#12BABC"}'),O=[{neatFlagKey:"eday_vote_flg",neatValueKey:"total_eday_vote",neatPercentKey:"eday_vote_percent_0",neatCandidateValueKey:"eday_vote",modeKey:"electionDay",label:"Election Day",color:i()(d,"electionDay"),lightColor:i()(d,"electionDayLight")},{neatFlagKey:"early_by_mail_flg",neatValueKey:"total_early_by_mail_vote",neatPercentKey:"early_by_mail_vote_percent_0",neatCandidateValueKey:"early_by_mail_vote",modeKey:"earlyByMail",label:"Early by Mail",color:i()(d,"earlyByMail",""),lightColor:i()(d,"earlyByMailLight","")},{neatFlagKey:"early_in_person_flg",neatValueKey:"total_early_in_person_vote",neatPercentKey:"early_in_person_vote_percent_0",neatCandidateValueKey:"early_in_person_vote",modeKey:"earlyInPerson",label:"Early In Person",color:i()(d,"earlyInPerson",""),lightColor:i()(d,"earlyInPersonLight","")},{neatFlagKey:"provisional_flg",neatValueKey:"total_provisional_vote",neatPercentKey:"provisional_vote_percent_0",neatCandidateValueKey:"provisional_vote",modeKey:"provisional",label:"Provisional",color:i()(d,"provisional",""),lightColor:i()(d,"provisionalLight","")}],D=O,X=({race:y,disabled:S=[]})=>O.filter(R=>{const{neatFlagKey:l,modeKey:B}=R;return i()(y,l,!1)&&!S.includes(B)?R:!1})},"./helpers/pluralize.js":(J,r,e)=>{e.r(r),e.d(r,{SINGULAR_TO_PLURAL:()=>_,default:()=>i});const _={seat:"seats",race:"races",is:"are",wins:"win",advances:"advance",day:"days",delegate:"delegates",primary:"primaries",candidate:"candidates",republican:"republicans",democrat:"democrats",municipality:"municipalities","legislative district":"legislative districts","congressional district":"congressional districts",township:"townships",district:"districts",ward:"wards",county:"counties",superdelegate:"superdelegates",vote:"votes"};function i(d,O){return O===1?d:_[d]??d}},"./helpers/timeUtilities.js":(J,r,e)=>{e.r(r),e.d(r,{formatDuration:()=>x,getDate:()=>s,getDateNow:()=>T,getPollClosedFormatted:()=>q,isAfter:()=>ee,isBefore:()=>z});var _=e("./node_modules/left-pad/index.js"),i=e.n(_),d=e("./node_modules/parse-iso-duration/index.js"),O=e.n(d),D=e("./node_modules/dayjs/plugin/utc.js"),X=e.n(D),y=e("./node_modules/dayjs/plugin/timezone.js"),S=e.n(y),R=e("./node_modules/dayjs/plugin/isSameOrAfter.js"),l=e.n(R),B=e("./lib/dayjsCustom.js"),j=e("./server/v2/helpers/getPollsCloseFormatted.js");B.dayJsCustom.extend(X()),B.dayJsCustom.extend(S()),B.dayJsCustom.extend(l());const P=u=>Math.floor(u/1e3%60),W=u=>Math.floor(u/(1e3*60)%60),C=u=>Math.floor(u/(1e3*60*60)%24),s=u=>(0,B.dayJsCustom)(u),T=()=>B.dayJsCustom.utc().tz("America/New_York"),v=u=>i()(String(u),2,"0"),x=u=>{let f;try{f=O()(u)}catch{return null}if(!f)return null;const E=C(f),h=W(f),Q=P(f);if(!E){const te=v(h),ae=v(Q);return`${te}:${ae}`}return`${v(E)}:${v(h)}:${v(Q)}`},z=(u,f="day")=>{const E=T(),h=s(u);return(0,B.dayJsCustom)(E).isBefore(h,f)},ee=(u,f="day")=>{const E=T(),h=s(u);return(0,B.dayJsCustom)(E).isAfter(h,f)},q=(u,f,E)=>(0,j.default)({races:[{polls_close_utc:u}],electionDate:f,currentTime:E})},"./server/v2/format/formatCandidate.js":(J,r,e)=>{e.r(r),e.d(r,{formatAreaCandidates:()=>q,formatCandidate:()=>v,formatCandidates:()=>ee,getNeatColor:()=>T,getSizeOfLeadValues:()=>s});var _=e("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=e("./node_modules/lodash-es/round.js"),d=e("./node_modules/lodash-es/orderBy.js"),O=e("./server/v2/format/formatParty.js"),D=e("./server/v2/helpers/isNonPartisanRace.js"),X=e("./helpers/getPartyColor.js"),y=e("./helpers/getHeadshotUrl.js"),S=e("./helpers/getIsWinner.js"),R=e("./helpers/constants.js"),l=e("./server/v2/helpers/dates.js"),B=e("./helpers/isHeadshotUrlValid.js"),j=e("./server/v2/helpers/candidates.js");function P(u,f){var E=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);f&&(h=h.filter(function(Q){return Object.getOwnPropertyDescriptor(u,Q).enumerable})),E.push.apply(E,h)}return E}function W(u){for(var f=1;f<arguments.length;f++){var E=arguments[f]!=null?arguments[f]:{};f%2?P(Object(E),!0).forEach(function(h){(0,_.default)(u,h,E[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(E)):P(Object(E)).forEach(function(h){Object.defineProperty(u,h,Object.getOwnPropertyDescriptor(E,h))})}return u}const C=`${y.headshotBaseUrl}/candidate_fallback_light.png`,s=u=>{let f=0,E=0,h=!1;return u.length>1&&u[0].votes&&u[0].percentVote&&(h=u[0].votes===u[1].votes,f=u[0].votes-u[1].votes,E=(0,i.default)(u[0].percentVote-u[1].percentVote,1)),{leadByVote:f,leadByPct:E,votesAreTied:h}},T=(u,f)=>{if(!f||!u)return null;const E=f[u]?.color_hex;return E?`#${E}`:null};function v({candidate:u,forcedColorOrder:f,race:E,headshots:h,colors:Q={}}){const{candidate_name:te="",candidate_code:ae=0,vote:ce="",major_party:ue="",percent:_e=0,given_name:ve="",family_name:k="",call_status:me="",is_incumbent:Te=!1,color_code:se}=u,{election_date:Me,election_type:Ce,state_code:ye,office_code:ge,jcode:fe}=E,he=(0,l.getYearFromElectionDate)(Me),je=(0,O.default)(ue),Se=(0,D.default)({officeCode:ge,stateAbbr:ye}),Ne=Se||R.PRIMARY_ELECTION_TYPE_CODES.includes(Ce),c=T(se,Q),p=(0,X.default)({party:Se?ue:je,electionSeason:he,officeCode:ge,order:f??u.order,stateAbbr:ye,electionTypeCode:Ce,useFullColorPalette:Ne}),I=c||p,$=I.replace("#","bg-"),F=`${_e}%`;let G=(0,y.default)({party:ue,firstName:ve,lastName:k,officeCode:ge,stateCode:ye,electionDate:he,fileFormat:"png",jcodeString:fe!=null?`${fe}`:""});h&&!(0,B.default)(h[he],G)&&(G=C);const Ee=(0,S.default)(me);return{callStatus:me,code:ae,name:te,firstName:ve,lastName:k,headshotUrl:G,isWinner:Ee,votes:ce,party:je,bgColor:$,colorHex:I,percentVote:_e,formattedPercentVote:F,isIncumbent:Te}}const x=u=>(0,d.default)(u,["vote","order"],["desc","asc"]);function z(u,f,E){const{order:h,major_party:Q}=E,te=Q.toLowerCase();return R.PRIMARY_ELECTION_TYPE_CODES.includes(f)&&u[te]?u[te].indexOf(E)+1:h}function ee({race:u,headshots:f,colors:E}){const h=x(u.candidates),Q=(0,j.getCandidatesByParty)(h);return h.map(te=>v({forcedColorOrder:z(Q,u.election_type,te),headshots:f,candidate:te,race:u,colors:E}))}function q({county:u,race:f,headshots:E,colors:h}){const Q=u?.candidates?.map(k=>{const me=f.candidates.find(Te=>Te.candidate_code===k.code);return W(W({},me),{},{vote:k.vote,percent:k.vote_percent_1,percent_0:k.vote_percent_0})})??f.candidates,te=x(Q),ae=(0,j.getCandidatesByParty)(te),ce=te.map(k=>v({forcedColorOrder:z(ae,f.election_type,k),headshots:E,race:f,candidate:k,colors:h})),{leadByPct:ue,leadByVote:_e,votesAreTied:ve}=s(ce);return ce.map((k,me)=>(ve?me<=1&&(k.leadByVotes=0,k.leadByPercent=0):me===0&&k.votes>0&&(k.leadByVotes=_e,k.leadByPercent=ue),k))}},"./server/v2/format/formatParty.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>i});var _=e("./server/v2/normalize/normalizePartyAbbreviation.js");function i(d){const O=(0,_.default)(d).toLowerCase();return O==="rep"?"gop":O}},"./server/v2/helpers/candidates.js":(J,r,e)=>{e.r(r),e.d(r,{getCandidateByParty:()=>W,getCandidatesByParty:()=>O,isGovernorSeatUpForElection:()=>j,isHouseSeatUpForElection:()=>X,isSeatUpForElection:()=>P,isSenateSeatUpForElection:()=>D});var _=e("./node_modules/lodash.orderby/index.js"),i=e.n(_),d=e("./helpers/constants.js");function O(C){return i()(C,["order"],["asc"]).reduce((s,T)=>{const v=(T.major_party||T.party||"").toLowerCase();return v&&(s[v]||(s[v]=[]),s[v].push(T)),s},{})}function D({senateClass:C,electionSeason:s}){let T;switch(C){case 1:T=1790;break;case 2:T=1792;break;case 3:T=1794;break;default:return!1}return(s-T)%6===0}function X({electionSeason:C}){return C%2===0}const y=["NH","VT"],S=["AL","AK","AZ","AR","CA","CO","CT","FL","GA","HI","ID","IL","IA","KS","ME","MD","MA","MI","MN","NE","NV","NM","NY","OH","OK","OR","PA","RI","SC","SD","TN","TX","WI","WY","GU","MP","VI"],R=["DE","IN","MO","MT","NC","ND","UT","WA","WV","AS","PR"],l=["KY","LA","MS"],B=["NJ","VA"];function j({electionSeason:C,stateAbbr:s}){return y.includes(s)?C%2===0:R.includes(s)?(C-1788)%4===0:S.includes(s)?(C-1790)%4===0:l.includes(s)?(C-1787)%4===0:B.includes(s)?(C-1789)%4===0:!1}function P({electionSeason:C,term:s}){return s.office_code===d.OFFICE_CODES.SENATE?D({electionSeason:C,senateClass:s.office_class}):s.office_code===d.OFFICE_CODES.HOUSE?X({electionSeason:C}):s.office_code===d.OFFICE_CODES.GOVERNOR?j({electionSeason:C,stateAbbr:s.state_code}):null}const W=(C,s)=>C.find(T=>T.candidatePoliticalPartyAbbreviation===s)},"./server/v2/helpers/dates.js":(J,r,e)=>{e.r(r),e.d(r,{getYearFromElectionDate:()=>_});function _(i){return i.slice(0,4)}},"./server/v2/helpers/getFormattedTimestamp.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>j,getFormattedTimestampUTC:()=>l});var _=e("./node_modules/dayjs/plugin/utc.js"),i=e.n(_),d=e("./node_modules/dayjs/plugin/timezone.js"),O=e.n(d),D=e("./node_modules/dayjs/locale/es.js"),X=e.n(D),y=e("./lib/dayjsCustom.js");y.dayJsCustom.extend(i()),y.dayJsCustom.extend(O());const S={SAME_DAY:"h:mm A ET",BEFORE_TODAY:"MMM D, h:mm A ET",PREVIOUS_YEAR:"MMM D, YYYY"},R=(P,W="en")=>{let C="h:mm A ET";const s=(0,y.dayJsCustom)().tz("America/New_York"),T=s.format("YYYY-MM-DD").toString(),v=s.format("YYYY").toString(),x=P.format("YYYY"),z=P.format("YYYY-MM-DD"),ee=(0,y.dayJsCustom)(v).diff(x,"year"),q=(0,y.dayJsCustom)(T).diff(z,"day");return q===0&&(C=S.SAME_DAY),q>0&&(C=S.BEFORE_TODAY),ee>0&&(C=S.PREVIOUS_YEAR),P.locale(W).format(C)},l=(P,W="en")=>{if(!P||typeof P!="string")return"";const C=y.dayJsCustom.utc(P).tz("America/New_York");return R(C,W)},j=P=>!P||typeof P!="string"?"":R((0,y.dayJsCustom)(P))},"./server/v2/helpers/isNonPartisanRace.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>D});var _=e("./node_modules/lodash.get/index.js"),i=e.n(_),d=e("./helpers/constants.js");const O={[d.OFFICE_CODES.MAYOR]:["LC","CH"],[d.OFFICE_CODES.SUPREME_COURT]:["WI"]};function D({officeCode:X,stateAbbr:y}){return i()(O,[X],[]).includes(y)}},"./server/v2/normalize/normalizePartyAbbreviation.js":(J,r,e)=>{e.r(r),e.d(r,{default:()=>d});const i=O=>{if(typeof O!="string")return!1;const D=O.toLowerCase();return!["dem","rep","ind","lib"].includes(D)};function d(O){if(typeof O!="string")return"other";const D=O.toLowerCase()==="gop"?"Rep":O;return i(D)?"other":D}}}]);
