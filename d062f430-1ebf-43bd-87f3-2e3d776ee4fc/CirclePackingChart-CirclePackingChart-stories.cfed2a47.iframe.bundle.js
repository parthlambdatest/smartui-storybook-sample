"use strict";(globalThis.webpackChunkfirecracker=globalThis.webpackChunkfirecracker||[]).push([[8818],{"./components/CirclePackingChart/CirclePackingChart.stories.js":(I,c,e)=>{e.r(c),e.d(c,{VoteModeBubbles:()=>R,__namedExportsOrder:()=>K,default:()=>N});var j=e("./node_modules/@babel/runtime/helpers/esm/extends.js"),f=e("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),l=e("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),g=e("./node_modules/styled-jsx/style.js"),d=e.n(g),B=e("./node_modules/next/dist/compiled/react/index.js"),v=e("./node_modules/lodash.orderby/index.js"),A=e.n(v),D=e("./components/CirclePackingChart/CirclePackingChart.js"),M=e("./components/CirclePackingChart/Circle.js"),C=e("./helpers/circlePacking.js"),W=e("./helpers/getPartyColor.js");const a=JSON.parse('{"candidates":[{"party":"Rep","lastName":"Youngkin","county":"Lincoln","weight":50},{"party":"Dem","lastName":"McAuliffe","county":"Bland","weight":20},{"party":"Ind","lastName":"Blanding","county":"Prince Edward","weight":15},{"party":"Ind","lastName":"Cher","county":"Petersburg","weight":10},{"party":"O","lastName":"Write-ins","county":"Nelson","weight":5}]}');var n=e("./helpers/constants.js");const r=["usePalette","usePrimariesPalette","useCounties","countyColor"];var t=B.createElement;function i(p,E){var P=Object.keys(p);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(p);E&&(b=b.filter(function(S){return Object.getOwnPropertyDescriptor(p,S).enumerable})),P.push.apply(P,b)}return P}function s(p){for(var E=1;E<arguments.length;E++){var P=arguments[E]!=null?arguments[E]:{};E%2?i(Object(P),!0).forEach(function(b){(0,l.default)(p,b,P[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(P)):i(Object(P)).forEach(function(b){Object.defineProperty(p,b,Object.getOwnPropertyDescriptor(P,b))})}return p}const u={type:"range",min:0,max:100,step:1},y={Rep:"#DE3535",Dem:"#0471E6",other:"#595959"},x=[{name:"Election Day",weight:100},{name:"Early In Person",weight:50},{name:"Early By Mail",weight:25}],{voteModeWeights:O,voteModeDefaults:o}=x.reduce((p,E)=>{const P=`${E.name} Weight`;return p.voteModeWeights[P]={control:u,table:{category:"Global"}},p.voteModeDefaults[P]=E.weight,p},{voteModeWeights:{},voteModeDefaults:{}}),{candidateWeights:h,candidateDefaults:_}=a.candidates.reduce((p,E)=>(x.forEach(P=>{const b=`${E.lastName} ${P.name} Weight`;p.candidateWeights[b]={control:u,table:{category:P.name}},p.candidateDefaults[b]=E.weight}),p),{candidateWeights:{},candidateDefaults:{}}),N={component:D.default,title:"Features/Vote Modes/Circle Packing",argTypes:s(s(s({},O),h),{},{padding:{control:{type:"number",options:{min:0}},table:{category:"Global"}},rotation:{control:{type:"range",min:0,max:360},table:{category:"Global"}},usePrimariesPalette:{control:"boolean",table:{category:"Global"}},usePalette:{options:["none","Dem","Rep"],control:{type:"select"},table:{category:"Global"},if:{arg:"usePrimariesPalette"}},useCounties:{control:"boolean",table:{category:"Global"}},countyColor:{control:{type:"color"},table:{category:"Global"},if:{arg:"useCounties"}}}),args:s(s(s({},o),_),{},{padding:0,usePrimariesPalette:!1,usePalette:"none",useCounties:!1,countyColor:"#eeb900"}),parameters:{controls:{exclude:["chart","strokeColor","strokeWidth","className"]}}};function R(p){let{usePalette:E,usePrimariesPalette:P,useCounties:b,countyColor:S}=p,$=(0,f.default)(p,r);const Y=x.map(m=>{const F=$[`${m.name} Weight`];return{mode:m,weight:F}}),V=Y.reduce((m,F)=>m+F.weight,0),G=Y.map(({mode:m,weight:F})=>{const k=a.candidates.map((T,w)=>s(s({},T),{},{order:w+1,weight:$[`${T.lastName} ${m.name} Weight`]})),U=k.reduce((T,w)=>T+w.weight,0),L=F/V;return s(s({},m),{},{percentInt:L*100,candidates:k.map(T=>s(s({},T),{},{value:T.weight/U*L,percentInt:T.weight/U*100}))})}),J=(0,C.getPackedCircles)({fill:m=>b?S:P&&E!=="none"?(0,W.default)({electionType:n.ELECTION_TYPE.PRIMARY,electionSeason:"2022",electionTypeCode:m.party==="Dem"?n.ELECTION_TYPE_CODES.DEMOCRATIC_PRIMARY:n.ELECTION_TYPE_CODES.REPUBLICAN_PRIMARY,officeCode:n.OFFICE_CODES.GOVERNOR,order:m.order,party:E}):y[m.party]||y.other,children:m=>m.candidates,id:m=>m.lastName||m.name,data:G});return t(B.Fragment,null,t(d(),{id:"2713113481"},[".container.jsx-2713113481{max-width:800px;display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));grid-gap:12px;font-family:FoundersGroteskCond,Arial Narrow,Arial,sans-serif;}",".header.jsx-2713113481{display:block;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:60px;}",".chart.jsx-2713113481{min-height:60px;-webkit-flex:0 0 60px;-ms-flex:0 0 60px;flex:0 0 60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;}",".candidate-container.jsx-2713113481 .chart.jsx-2713113481{min-height:unset;display:none;}",".header.jsx-2713113481 h3.jsx-2713113481{font-size:18px;line-height:1.2;margin:0;text-transform:uppercase;}",".vote-mode__heading.jsx-2713113481{margin-left:12px;}",".main.jsx-2713113481{border-top:1px solid #efefef;margin-top:12px;padding-top:12px;}",".candidate-container.jsx-2713113481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:12px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".candidate__heading.jsx-2713113481{text-align:left;margin-left:12px;}",".candidate.jsx-2713113481{text-transform:uppercase;}",".percent.jsx-2713113481{font-size:20px;}","@media screen and (min-width:758px){.candidate-container.jsx-2713113481 .chart.jsx-2713113481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.header.jsx-2713113481 h3.jsx-2713113481{font-size:24px;}.header.jsx-2713113481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}"]),t("div",{className:"jsx-2713113481 container"},J.map((m,F)=>{const k=G[F],U={flexBasis:m.parent.r*2};return t("section",{key:m.id,className:"jsx-2713113481 column"},t("header",{className:"jsx-2713113481 header"},t("div",{style:U,className:"jsx-2713113481 chart"},t(D.default,(0,j.default)({},$,{chart:m}))),t("div",{className:"jsx-2713113481 vote-mode__heading"},t("h3",{className:"jsx-2713113481"},k.name),t("div",{className:"jsx-2713113481"},k.percentInt.toFixed(1),"%"))),t("div",{className:"jsx-2713113481 main"},A()(m.circles,["r"],["desc"]).map(L=>{const T=k.candidates.find(w=>w.lastName===L.id);return t("div",{key:L.id,className:"jsx-2713113481 candidate-container"},t("div",{style:U,className:"jsx-2713113481 chart"},t(M.default,{circle:L})),t("div",{className:"jsx-2713113481 candidate__heading"},t("div",{className:"jsx-2713113481 candidate"},b?T.county:T.lastName),t("div",{className:"jsx-2713113481 percent"},T.percentInt.toFixed(1),"%")))})))})))}const K=["VoteModeBubbles"]},"./components/CirclePackingChart/Circle.js":(I,c,e)=>{e.r(c),e.d(c,{default:()=>D});var j=e("./node_modules/@babel/runtime/helpers/esm/extends.js"),f=e("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),l=e("./node_modules/next/dist/compiled/react/index.js"),g=e("./node_modules/prop-types/index.js"),d=e.n(g),B=e("./components/CirclePackingChart/CirclePackingChart.propsShape.js");const v=["circle","className"];var A=l.createElement;function D(M){let{circle:C,className:W}=M,a=(0,f.default)(M,v);const n=C.r*2,r=C.r;return A("svg",(0,j.default)({className:W,viewBox:`0 0 ${n} ${n}`,width:n,height:n},a),A("circle",{transform:`translate(${r}, ${r})`,fill:C.fill,r:C.r}))}D.displayName="Circle",D.defaultProps={className:null},D.propTypes={className:d().string,circle:B.ProportionalCircle.isRequired}},"./components/CirclePackingChart/CirclePackingChart.js":(I,c,e)=>{e.r(c),e.d(c,{default:()=>C});var j=e("./node_modules/@babel/runtime/helpers/esm/extends.js"),f=e("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),l=e("./node_modules/next/dist/compiled/react/index.js"),g=e("./node_modules/prop-types/index.js"),d=e.n(g),B=e("./node_modules/classnames/index.js"),v=e.n(B),A=e("./components/CirclePackingChart/CirclePackingChart.propsShape.js");const D=["chart","className","padding","rotation","strokeColor","strokeWidth"];var M=l.createElement;function C(W){let{chart:a,className:n,padding:r,rotation:t,strokeColor:i,strokeWidth:s}=W,u=(0,f.default)(W,D);const{parent:y,circles:x}=a,O=y.r,o=y.r*2,h={width:o,height:o,transform:`rotate(${t}deg)`,flex:`0 0 ${o}px`};return M("div",(0,j.default)({className:v()("br-100 container bg-gray-20 relative",n),style:h},u),M("svg",{className:"absolute aspect-ratio--object",viewBox:`0 0 ${o} ${o}`,width:o,height:o},x.map(_=>_.r-r/2<=0?null:M("circle",{key:_.id,transform:`translate(${_.x+O}, ${_.y+O})`,fill:_.fill,stroke:i,strokeWidth:s,r:_.r-r/2}))))}C.displayName="CirclePackingChart",C.defaultProps={className:null,padding:0,rotation:45,strokeColor:"#eff",strokeWidth:1},C.propTypes={className:d().string,chart:A.PackedCircles.isRequired,padding:d().number,strokeColor:d().string,strokeWidth:d().number,rotation:d().number}},"./components/CirclePackingChart/CirclePackingChart.propsShape.js":(I,c,e)=>{e.r(c),e.d(c,{Circle:()=>D,DisplayCoordinates:()=>M,PackedCircles:()=>n,PackedCirclesContainer:()=>C,PositionedCircle:()=>a,ProportionalCircle:()=>W});var j=e("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),f=e("./node_modules/prop-types/index.js"),l=e.n(f);function g(r,t){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),i.push.apply(i,s)}return i}function d(r){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?g(Object(i),!0).forEach(function(s){(0,j.default)(r,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(i,s))})}return r}const B={r:l().number.isRequired},v={x:l().number.isRequired,y:l().number.isRequired},A=d(d({},B),{},{id:l().string.isRequired,fill:l().string.isRequired}),D=l().shape(B),M=l().shape(v),C=l().shape(d(d({},B),{},{id:l().string.isRequired})),W=l().shape(A),a=l().shape(d(d({},A),v)),n=l().shape({circles:l().arrayOf(a),parent:C})},"./data/partyColors.js":(I,c,e)=>{e.r(c),e.d(c,{default:()=>j});const j={default:{dem:"#0471E6",rep:"#DE3535",grn:"#7A7A7A",con:"#7A7A7A",rp:"#7A7A7A",wf:"#7A7A7A",ind:"#595959",lib:"#A99369",oth:"#7A7A7A",weq:"black",yes:"#9E0084",no:"#2AA78B",ballotyes:"#9E0084",ballotno:"#2AA78B",iap:"salmon",npa:"brown",non:"green",for:"green",agn:"red",uncalled:"#e6e6e6",default:"#595959",other:"#7A7A7A",undecided:"#EBEBEB"},2022:{dem:"#009AF4",rep:"#D42F37",yes:"#9E0084",no:"#2AA78B",uncalled:"#e6e6e6",default:"#5C5C5C",other:"#7A7A7A",undecided:"#EBEBEB"},2023:{dem:"#009AF4",rep:"#D42F37",yes:"#F96419",no:"#645FAA",uncalled:"#e6e6e6",default:"#5C5C5C",other:"#7A7A7A",undecided:"#EBEBEB"},2024:{dem:"#0487E6",rep:"#DD2929",yes:"#F96419",no:"#645FAA",uncalled:"#BEBEBE",default:"#959595",other:"#7A7A7A",undecided:"#BEBEBE"}}},"./helpers/circlePacking.js":(I,c,e)=>{e.r(c),e.d(c,{getMaxWidth:()=>W,getPackedCircles:()=>C,getProportionalCircles:()=>M});var j=e("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),f=e("./node_modules/d3-hierarchy/src/pack/siblings.js"),l=e("./node_modules/d3-hierarchy/src/pack/enclose.js"),g=e("./node_modules/lodash.orderby/index.js"),d=e.n(g),B=e("./node_modules/lodash.get/index.js"),v=e.n(B);function A(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);n&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),r.push.apply(r,t)}return r}function D(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?A(Object(r),!0).forEach(function(t){(0,j.default)(a,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(r,t))})}return a}function M({data:a,id:n=s=>s.id,value:r=s=>s.value,fill:t="#eeb900",maxWidth:i=60}){const s=Math.max(...a.map(u=>r(u)));return a.map(u=>{const y=r(u)/s,x=i/2*y;return{id:n(u),fill:t,r:Number.isFinite(x)?x:0}})}function C({data:a,fill:n=(u,y)=>y?"#ebebeb":"#efefef",id:r=u=>u.id,value:t=u=>u.value,children:i=u=>u.children,maxWidth:s=60}){const y=a.map(o=>{const h=i(o,!0)||[];return{id:r(o,!0),fill:n(o,!0),children:h.map(_=>({id:r(_,!1),r:t(_),fill:n(_,!1)}))}}).map(o=>{const h=d()(o.children,["r"],["desc"]);(0,f.default)(h);const _=(0,l.default)(h);return{circles:h,parent:D(D({},_),{},{id:o.id})}}),x=Math.max(...y.map(o=>o.parent.r)),O=s/2/x;return Number.isFinite(O)?y.map(o=>(o.parent.r*=O,o.circles.forEach(h=>{h.r*=O,h.x*=O,h.y*=O}),o)):y}function W(a){return Math.max(v()(a,"parent.r",0),v()(a,"candidates.parent.r",0),v()(a,"counties.parent.r",0))*2}},"./helpers/getPartyColor.js":(I,c,e)=>{e.r(c),e.d(c,{default:()=>W});var j=e("./node_modules/lodash.get/index.js"),f=e.n(j),l=e("./data/partyColors.js"),g=e("./data/primaryColors.json"),d=e("./helpers/constants.js"),B=e("./helpers/isPrimaryElection.js"),v=e("./server/v2/format/formatNationalRacesToWatchData.js");const A=["dem","rep"],D=["ind","npa","npt"],M=({normalizedParty:a,order:n,officeCode:r,useHousePrimaryColors:t,useFullColorPalette:i,electionSeason:s,electionTypeCode:u,stateAbbr:y})=>{const[x]=g.default;if(!a||typeof a!="string"||!n||typeof n!="number"||!r||typeof r!="string")return x;const O=d.OFFICE_NAMES[r]||"";let o="other",h="other";i&&a==="nonpartisan"?h=r:!i&&O.includes("president")?o="president":O==="house"&&(o=t&&!i?"house":"other",h=i?"other":"house");const _=f()(g,["season",s,r,y,u]),N=f()(g,["season",s,h,a]),R=f()(g,[o,a]),K=n-1,p=f()(_||N||R,[K]),E=f()(g,["season",s,h,"default",a]);return p||E||x},W=({party:a,order:n,officeCode:r,electionSeason:t,electionType:i,electionTypeCode:s="",stateAbbr:u,onlySupportMajorParties:y=!0,useHousePrimaryColors:x=!1,useFullColorPalette:O=!1,isGain:o})=>{const{default:{default:h}}=l.default,N=t&&f()(l.default,[t,"default"])||h;if(!a||typeof a!="string")return N;let R=a.toLowerCase();R==="gop"?R="rep":D.includes(R)&&(R="nonpartisan");const K=A.includes(R);if(o&&d.ELECTION_TYPE.GENERAL===s&&t>=2024&&K)return v.MAP_COLORS_FLIP_BY_PARTY[R];if((0,B.default)(s)||i===d.ELECTION_TYPE.PRIMARY||O)return M({electionTypeCode:s,normalizedParty:R,order:n,officeCode:r,useHousePrimaryColors:x,useFullColorPalette:O,electionSeason:t,stateAbbr:u});if(y&&!A.includes(R))return N;const E=t&&f()(l.default,[t,R]),P=f()(l.default,["default",R],null);return E||P||N}},"./helpers/isPrimaryElection.js":(I,c,e)=>{e.r(c),e.d(c,{default:()=>g});var j=e("./helpers/constants.js"),f=e("./node_modules/console-browserify/index.js");const g=(d="")=>typeof d!="string"?(f.warn("isPrimaryElection expects a type of string"),!1):j.PRIMARY_ELECTION_TYPE_CODES.includes(d)},"./data/primaryColors.json":I=>{I.exports=JSON.parse('{"president":{"dem":["#3899E7","#A861B5","#84AD48","#DD7026","#697BB6","#3A766F","#6C4682","#F1A410","#89D0E0","#414E7D","#8DB0D9","#8D438B","#738754","#90E0AD","#B8983B","#46A695"],"rep":["#DE3535","#750C0C","#CD7575","#A80101","#9B7777","#470000"]},"house":{"dem":["#308CEF","#C00594","#84AD48","#F96419","#7D78C3","#14866D","#730069","#EEB900","#50CDB1","#68A9EF","#113F75"],"rep":["#DE3535","#6D0000","#EEB8B8","#BB2323","#EE6868","#952727"]},"other":{"dem":["#388FC2","#213F64","#839EBE","#2D5D98","#5F7887","#011521","#285F7F","#5D8CA9","#3A719C","#1F4C83","#3F82AA","#05334F"],"rep":["#DE3535","#750C0C","#CD7575","#A80101","#9B7777","#470000"]},"default":["#595959"],"season":{"2022":{"house":{"dem":[],"rep":[],"default":{"rep":"#D42F37","dem":"#009AF4"}},"other":{"dem":["#009AF4","#8567E6","#20A4A8","#1F69AB","#8A8FBF"],"rep":["#D42F37","#D77F2D","#A23D69","#BD84A3","#CE5883"],"default":{"rep":"#5C5C5C","dem":"#5C5C5C","yes":"#9E0084","no":"#2AA78B"}}},"2023":{"B":{"WI":{"G":["#CD7575","#6873AE"]}},"M":{"CH":{"W":["#5F7887","#839EBE"]}}},"2024":{"other":{"dem":["#0487E6","#034B8F","#00CBAC","#8370F1","#79AF2D","#F1A410","#278685","#8D43AB","#73718B","#8DB0D9","#B89846","#80DAEE","#738754","#90EDAD","#41D7ED"],"rep":["#DD2929","#8F1B1B","#F69696","#E38B39","#B84C96","#FF6000","#9F8383","#BC8604","#DEB703","#E26D99","#D8A084","#877354","#470000","#BB37FF","#8A3752"],"default":{"rep":"#959595","dem":"#959595","yes":"#F96419","no":"#645FAA","other":"#959595"}}}}}')}}]);
