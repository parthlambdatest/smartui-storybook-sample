"use strict";(globalThis.webpackChunkfirecracker=globalThis.webpackChunkfirecracker||[]).push([[4772],{"./components/ScalingSVG.js":(dt,F,o)=>{o.r(F),o.d(F,{default:()=>I});var Z=o("./node_modules/@babel/runtime/helpers/esm/extends.js"),g=o("./node_modules/styled-jsx/style.js"),M=o.n(g),H=o("./node_modules/prop-types/index.js"),N=o.n(H),O=o("./node_modules/next/dist/compiled/react/index.js"),C=O.createElement;const v=R=>{const{ampId:_,children:q,dataAttributes:L,height:$,width:K,margin:Y,viewBoxOverride:z}=R,T=100*($/K),tt=z||`0 0 ${K} ${$}`;return C(O.Fragment,null,C(M(),{id:"19491314",dynamic:[T]},[`.scaling-svg.__jsx-style-dynamic-selector{position:relative;height:0;width:100%;padding:0;padding-bottom:${T}%;}`,".scaling-svg__svg.__jsx-style-dynamic-selector{position:absolute;height:100%;width:100%;left:0;top:0;}"]),C("div",{items:"true",className:M().dynamic([["19491314",[T]]])+" scaling-svg"},C("svg",(0,Z.default)({id:_,viewBox:tt,preserveAspectRatio:"xMinYMin meet"},L,{className:M().dynamic([["19491314",[T]]])+" "+(L&&L.className!=null&&L.className||"scaling-svg__svg")}),C("g",{transform:`translate(${Y.left}, ${Y.top})`,className:M().dynamic([["19491314",[T]]])},q))))};v.propTypes={ampId:N().string,children:N().node.isRequired,height:N().number.isRequired,width:N().number.isRequired,viewBoxOverride:N().string,margin:N().shape({top:N().number,left:N().number})},v.defaultProps={viewBoxOverride:null},v.defaultProps={ampId:"",margin:{top:0,left:0}};const I=v},"./components/StateMap/2022/primaries/USStateMapSwitcher.js":(dt,F,o)=>{o.r(F),o.d(F,{default:()=>Tt});var Z=o("./node_modules/styled-jsx/style.js"),g=o.n(Z),M=o("./node_modules/next/dist/compiled/react/index.js"),H=o("./node_modules/next/amp.js"),N=o("./node_modules/d3-array/src/max.js"),O=o("./node_modules/d3-scale/src/linear.js"),C=o("./node_modules/prop-types/index.js"),v=o.n(C),I=M.createElement;const R=a=>{const{height:d,race:n,units:u,width:i}=a,{counties:h}=n,m=h.map(r=>{const{results:x}=r;return x[1]?x[0].votes-x[1].votes:0}),c=N.default(m),p=O.default().range([0,30]);p.domain([0,c!==0?c:100]);const l=i*.25,y=[{cy:d/2,label:c,r:p(c)},{cy:d/2+p(c*.5),label:parseInt(c*.5,10),r:p(c*.5)}];return I("svg",{height:d,width:i,className:"state-map--legend"},c>0?I("g",null,y.map((r,x)=>I("g",{key:x},I("circle",{cx:l,cy:r.cy,fill:"none",r:r.r,stroke:"#999999"}),I("text",{className:"founders-mono fw1",fontSize:"12px",stroke:"black",y:r.cy-r.r+4,x:i*.51},r.label," ",x===0?u:""),I("line",{stroke:"#999999",strokeDasharray:"4 2",x1:l,x2:i*.5,y1:r.cy-r.r,y2:r.cy-r.r})))):I("g",null))};R.displayName="USStateMapLeadMarginLegend",R.defaultProps={height:100,units:"votes",width:150},R.propTypes={height:v().number,units:v().string,width:v().number};const _=R;var q=o("./node_modules/d3-geo/src/path/index.js"),L=o("./node_modules/lodash.kebabcase/index.js"),$=o.n(L),K=o("./node_modules/lodash.orderby/index.js"),Y=o.n(K),z=o("./node_modules/topojson-client/src/feature.js"),it=o("./components/ScalingSVG.js"),T=o("./components/AmpLiveListWrapper.js"),tt=o("./components/providers/StatewideElectionProvider.js"),ct=o("./data/mapDimensions.json"),pt=o("./data/usCities.json"),mt=o("./helpers/getStatePlane.js"),ut=o("./helpers/MobileDetection.js"),j=M.createElement;const ht={1404263:{x:-52,y:16},1654952:{x:10,y:15},308416:{x:-7,y:-11},479210:{x:-78,y:23},485477:{x:-54,y:-7},517517:{x:15,y:3},2404963:{x:-70,y:-7},1681812:{x:0,y:20},655030:{x:5,y:-5},662851:{x:12,y:15},877450:{x:10,y:15},878762:{x:10,y:-6},973345:{x:0,y:15},1024242:{x:0,y:15},1028945:{x:-50,y:20},1209052:{x:-87,y:24},1267670:{x:-80,y:23},1384879:{x:0,y:-4},1380951:{x:0,y:11},1496841:{x:-105,y:26},1512683:{x:-56,y:20},1581834:{x:-16,y:23},1609077:{x:-23,y:-7}},ft=a=>{const d=pt.features.filter(u=>u.properties.STATE===a.toUpperCase()),n=Y()(d,["properties.POP_2010"],["desc"]);return a==="CA"?n.slice(0,5):a==="TX"||a==="FL"||a==="NY"?n.slice(0,4):n.slice(0,3)},yt=a=>!!a,gt=a=>!!a,xt=a=>!!a,vt=a=>!!a,et=(a,d)=>{const{CDFP:n,GEOID:u,TOWN:i,NDISTRICT:h,CONGRESSIONAL_DISTRICT:m,WARD:c,MUNICIPALITY:p}=a.properties,l=yt(i),y=gt(h),r=xt(m),x=vt(c),E=p;let w=u;if(n&&(w=$()(`${d.name}-${n}`)),l&&(w=$()(`${i}`)),y&&(w=h),r&&(w=$()(`${m}`)),x&&(w=$()(`${c}`)),E){const{NAME:k=""}=a.properties;w=$()(k)}return w},jt=300,wt=1.5,St=10,bt=7,V=({fills:a,geography:d,id:n,raceId:u,raceName:i,radii:h,showInstructions:m,type:c,updated:p})=>{const{state:{topojson:l,usState:y}}=(0,M.useContext)(tt.StatewideElectionContext),r=y.abbr,x=c==="bubble",E=c==="def",w=ft(r),k=z.default(l,l.objects[d]),W=ct[r.toUpperCase()]||{},nt=W.aspectRatio||wt,B=W.height||jt,J=Math.floor(B*nt),Q=(0,mt.default)(r.toUpperCase(),J,B),P=q.default().projection(Q),lt=(0,H.useAmp)(),e=r==="AK",t=1;let s=2;return(0,M.useEffect)(()=>{ut.default.iOS()&&(s=0)}),j("div",{"data-analytics-race-name":i,"data-analytics-map-type":c,"data-test":"statewide__us-state-map",className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])+" us-state-map df flex-column justify-center js-us-state-map mt2"},j(g(),{id:"2417460293",dynamic:[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]},[".def.__jsx-style-dynamic-selector{height:0;}","amp-live-list.__jsx-style-dynamic-selector>[update].__jsx-style-dynamic-selector{display:none;}","circle.__jsx-style-dynamic-selector{pointer-events:none;}","defs.__jsx-style-dynamic-selector path.__jsx-style-dynamic-selector{fill-opacity:inherit;}",`use.__jsx-style-dynamic-selector{${e?"":"cursor: pointer;"} ${e?"":"stroke: white"};${e?"pointer-events: none":""};stroke-width:1;}`,`use.__jsx-style-dynamic-selector:hover{${e?"":"stroke-width: 2.8;"};}`,`text.__jsx-style-dynamic-selector{color:black;text-shadow: ${t}px ${t}px ${s}px #fff, -${t}px -${t}px ${s}px #fff, ${t}px -${t}px ${s}px #fff, -${t}px ${t}px ${s}px #fff;}`]),E?j("svg",{className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])+" def"},j("defs",{className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])},k.features.map(S=>{const A=et(S,y),b=`${r}-${d}-polygon-${A}`;return j("path",{d:P(S),id:b,key:b,className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])})}))):j(T.default,{id:`${r}-${d}-${n}-map-amp-live-list`,dataMaxItemsPerPage:1,isAmp:lt},j(it.default,{ampId:n,height:B,width:J,dataAttributes:{"data-race-id":u,"data-sort-time":p,"data-update-time":p}},k.features.map(S=>{const{NAMELSAD:A}=S.properties,b=et(S,y),D=a[e?"02901":b]||"#e6e6e6";return j("g",{id:`${n}-polygon-${b}`,key:A,className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])},j("use",{"data-feature-id":b,"data-us-state":r,"data-fill-id":b,fill:x?"#e6e6e6":D,xlinkHref:`#${r}-${d}-polygon-${b}`,className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])}))}),k.features.map(S=>{const{NAMELSAD:A,INTPTLAT:b,INTPTLON:U}=S.properties;let D;const G=et(S,y),kt=a[e?"02901":G]||"#e6e6e6";return b&&U?D=Q([+U,+b]):D=P.centroid(S),j("g",{id:`${n}-circle-${G}`,key:A,className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])},x?j("circle",{cx:D[0],cy:D[1],fill:kt,r:h[G]||"0",opacity:"0.4",className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])}):null)}),j("g",{id:`${n}-cities`,className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])},w.map(S=>{const[A,b]=P.centroid(S),U=ht[S.properties.GNIS_ID]||{},D=U.x||St,G=U.y||bt;return j("g",{key:S.properties.GNIS_ID,transform:`translate(${A} ${b})`,className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])},j("rect",{"data-name":S.properties.NAME,fill:"black",stroke:"white",strokeWidth:"1.2px",width:"7",height:"7",className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])}),j("text",{"data-test":`state-map__label-${S.properties.NAME}`,transform:`translate(${D} ${G})`,className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])+" founders-mono f2"},S.properties.NAME))})))),m&&!lt&&j("div",{id:"js-map-hover-instructions","data-test":"statewide__map-hover-instructions",className:g().dynamic([["2417460293",[e?"":"cursor: pointer;",e?"":"stroke: white",e?"pointer-events: none":"",e?"":"stroke-width: 2.8;",t,t,s,t,t,s,t,t,s,t,t,s]]])+" dn publico-txt f3 fs-italic gray-100 lh-title tr"},"Hover over the map for details"))};V.displayName="USStateMap",V.propTypes={fills:v().object,geography:v().oneOf(["counties","districts","townships","legislativeDistricts","congressionalDistricts","municipalities"]),id:v().string.isRequired,raceId:v().string.isRequired,raceName:v().string,radii:v().object,type:v().oneOf(["bubble","regular","def"]),updated:v().number},V.defaultProps={fills:{},geography:"counties",raceName:"",radii:{},type:"regular",updated:0};const st=V;var Mt=o("./node_modules/lodash.padstart/index.js"),rt=o.n(Mt),at=o("./helpers/getPartyColor.js");const ot=(0,at.default)({party:"uncalled",onlySupportMajorParties:!1}),Nt=a=>{const{call_status:d,jcode:n,state_name:u,results:i,office_code:h,election_type:m}=a,c=["A","P","W"].includes(d),p=$()(`${u}-${rt()(n,2,"0")}`);let l=`${ot}`;if(!i)return{[p]:l};const y=i[0],r=i.length>1?i[1]:null,{order:x,party:E}=y,w=r&&r.votes===y.votes;return y.votes!==0&&!w&&(l=(0,at.default)({officeCode:h,order:x,party:E,electionTypeCode:m})),c||(l=`${ot}`),{[p]:l}},$t=a=>{const{counties:d,election_type:n,office_code:u}=a;return d.reduce((h,m)=>{const{featureId:c,results:p}=m,l=p[0],y=p.length>1?p[1]:null,{order:r,party:x}=l,E=y&&y.votes===l.votes;let w=`${ot}`;return l.votes!==0&&!E&&(w=(0,at.default)({party:x,electionTypeCode:n,order:r,officeCode:u})),Object.assign(h,{[c]:w},{})},{})},Et=a=>{const{counties:d}=a,n=d.map(({results:m})=>m[0].votes-(m[1]?m[1].votes:0)),u={},i=O.default().range([0,30]),h=N.default(n);return i.domain([0,h!==0?h:100]),d.forEach(m=>{const{featureId:c,results:p}=m,l=p[0].votes-(p[1]?p[1].votes:0);u[c]=i(l)}),u},It=a=>{const{results:d,state_name:n,jcode:u}=a,i=d[0].votes-(d[1]?d[1].votes:0),h=$()(`${n}-${rt()(u,2,"0")}`),m={},c=O.default().range([0,30]),p=i;return c.domain([0,p!==0?p:100]),m[h]=c(i),m};var Dt=o("./helpers/isTownship.js"),X=o("./helpers/constants.js"),f=M.createElement;const Ct=(a,d,n,u,i,h)=>a?"townships":d?"legislativeDistricts":n?"congressionalDistricts":u==="H"?"districts":i?"wards":h?"municipalities":"counties",Tt=({race:a,showInstructions:d})=>{const{raceId:n,race_name:u,state_name:i,updated:h,office_code:m,election_type:c}=a,p=m==="H"?Nt(a):$t(a),l=`${n}-map-switcher`,y=m==="H"?It(a):Et(a),r=i==="Iowa"||i==="Nevada"?"Caucus results":"Popular vote",x=i==="Alaska",E=(0,H.useAmp)(),w=n.includes("2020-02-03E--IA--P"),k=(0,Dt.default)({stateName:i}),W=["Alaska"];X.PRIMARY_ELECTION_TYPE_CODES.includes(c)&&m===X.OFFICE_CODES.PRESIDENT&&W.push("North Dakota");const nt=W.includes(i),B=X.PRIMARY_ELECTION_TYPE_CODES.includes(c)&&m===X.OFFICE_CODES.PRESIDENT&&["Kansas"].includes(i),J=["District of Columbia"].includes(i),Q=["Rhode Island"].includes(i),P=Ct(k,nt,B,m,J,Q);return f(M.Fragment,null,f(g(),{id:"3939851630"},["input{left:-9999px;}",".wrapper{padding-bottom:30%;max-width:600px;margin:0 auto;}","@media screen and (min-width:758px){.wrapper{padding-bottom:25%;}}",".js-map-tooltip-slot{left:1.25rem;width:300px;}",".js-map-tooltip-slot:not(:empty){border-width:1px;z-index:10;}",".map-title{text-align:center;-webkit-transform-origin:top center;-ms-transform-origin:top center;transform-origin:top center;}",".us-state-map-switcher input:not(:checked)+label{cursor:pointer;-webkit-transform-origin:top right;-ms-transform-origin:top right;transform-origin:top right;position:absolute;top:100%;right:0;display:inline-block;width:120px;}",".us-state-map-switcher input:not(:checked)+label .map-title{font-size:14px;}",".us-state-map-switcher input:checked+label .map-title{display:none;}",".us-state-map-switcher input:not(:checked)+label .state-map--legend{display:none;}",".us-state-map-switcher input:checked+label .state-map--legend{display:block;}",".us-state-map-switcher input:not(:checked)+label use{pointer-events:none;stroke:white;stroke-width:1px;}",".us-state-map-switcher input:not(:checked)+label text{display:none;}","@media screen and (min-width:758px){.map-hover-instructions{max-width:50%;}.us-state-map-switcher input:not(:checked)+label{top:calc(100% + 20px);width:150px;}.us-state-map-switcher input:not(:checked)+label .map-title{font-size:20px;}}"]),f("div",{className:"jsx-3939851630 relative wrapper ml4"},f("div",{className:"jsx-3939851630 relative us-state-map-switcher"},f(st,{geography:P,id:`${l}-def`,raceId:n,type:"def"}),f("input",{type:"radio",name:l,id:`${l}-county`,defaultChecked:!0,className:"jsx-3939851630 absolute"}),f("label",{htmlFor:`${l}-county`,className:"jsx-3939851630 db tc"},f(st,{fills:p,geography:P,id:`${l}-county`,raceId:n,raceName:u,radii:y,updated:h}),f("div",{className:"jsx-3939851630 map-title dib founders-cond midnight-blue tr ttu"},r)),f("input",{type:"radio",name:l,id:`${l}-bubble`,className:"jsx-3939851630 absolute"}),!x&&f("label",{htmlFor:`${l}-bubble`,className:"jsx-3939851630 db tc"},f(st,{fills:p,geography:P,id:`${l}-bubble`,raceId:n,raceName:u,radii:y,type:"bubble",updated:h}),f("div",{className:"jsx-3939851630 map-title bubble-map-title dib founders-cond midnight-blue ttu"},"Lead margin"),f("div",{className:"jsx-3939851630 absolute pl8 pt8"},f(_,{race:a,units:w?"SDEs":"votes"})))),!d&&!E&&f("div",{"data-test":"statewide__map-hover-instructions",className:"jsx-3939851630 map-hover-instructions pe-none mt4 ml4 dn dib-m tl publico-txt f3 fs-italic gray-100 lh-title"},"Hover over the map for details"),f("div",{className:"jsx-3939851630 w-100 z-5"},f("div",{"data-test":"state-map__tooltip-slot",className:"jsx-3939851630 absolute bg-white dn bw0 b-gray-40 b-solid mh-auto pa2 w-80 state-map__tooltip-slot js-map-tooltip-slot"}))))}}}]);
